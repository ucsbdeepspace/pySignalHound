<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SignalHound &mdash; PySignalHound 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="PySignalHound 0.0.1 documentation" href="../index.html" />
    <link rel="up" title="Module code" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">PySignalHound 0.0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for SignalHound</h1><div class="highlight"><pre>
<span class="c"># -*- coding: UTF-8 -*-</span>

<span class="c"># Wrapper for Test-Equipment-Plus&#39;s &quot;SignalHound&quot; series of USB spectrum analysers.</span>
<span class="c">#</span>
<span class="c"># Written By Connor Wolf &lt;wolf@imaginaryindustries.com&gt;</span>
<span class="c">#</span>

<span class="c">#  * ----------------------------------------------------------------------------</span>
<span class="c">#  * &quot;THE BEER-WARE LICENSE&quot;:</span>
<span class="c">#  * Connor Wolf &lt;wolf@imaginaryindustries.com&gt; wrote this file. As long as you retain</span>
<span class="c">#  * this notice you can do whatever you want with this stuff. If we meet some day,</span>
<span class="c">#  * and you think this stuff is worth it, you can buy me a beer in return.</span>
<span class="c">#  * (Only I don&#39;t drink, so a soda will do). Connor</span>
<span class="c">#  * Also, support the Signal-Hound devs. Their hardware is pretty damn awesome.</span>
<span class="c">#  * ----------------------------------------------------------------------------</span>
<span class="c">#</span>

<span class="c"># TODO: Respin lots of the messy if: elif: else: statements into a dictionary lookup</span>

<span class="kn">import</span> <span class="nn">ctypes</span> <span class="kn">as</span> <span class="nn">ct</span>
<span class="kn">import</span> <span class="nn">ctypes.util</span> <span class="kn">as</span> <span class="nn">ctu</span>
<span class="kn">import</span> <span class="nn">bb_api_h</span> <span class="kn">as</span> <span class="nn">hf</span>


<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span><span class="p">:</span>
	<span class="kn">from</span> <span class="nn">ctypes</span> <span class="kn">import</span> <span class="n">wintypes</span> <span class="k">as</span> <span class="n">wt</span>
<span class="k">else</span><span class="p">:</span>
	<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Only windows is currently supported by the SignalHound hardware.&quot;</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">logging</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy.core.multiarray</span> <span class="kn">import</span> <span class="n">int_asbuffer</span>
<span class="kn">import</span> <span class="nn">os.path</span>


<div class="viewcode-block" id="SignalHound"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound">[docs]</a><span class="k">class</span> <span class="nc">SignalHound</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

	<span class="n">bbStatus</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s">&quot;bbInvalidModeErr&quot;</span>             <span class="p">:</span> <span class="o">-</span><span class="mi">112</span><span class="p">,</span>
		<span class="s">&quot;bbReferenceLevelErr&quot;</span>          <span class="p">:</span> <span class="o">-</span><span class="mi">111</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidVideoUnitsErr&quot;</span>       <span class="p">:</span> <span class="o">-</span><span class="mi">110</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidWindowErr&quot;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">109</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidBandwidthTypeErr&quot;</span>    <span class="p">:</span> <span class="o">-</span><span class="mi">108</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidSweepTimeErr&quot;</span>        <span class="p">:</span> <span class="o">-</span><span class="mi">107</span><span class="p">,</span>
		<span class="s">&quot;bbBandwidthErr&quot;</span>               <span class="p">:</span> <span class="o">-</span><span class="mi">106</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidGainErr&quot;</span>             <span class="p">:</span> <span class="o">-</span><span class="mi">105</span><span class="p">,</span>
		<span class="s">&quot;bbAttenuationErr&quot;</span>             <span class="p">:</span> <span class="o">-</span><span class="mi">104</span><span class="p">,</span>
		<span class="s">&quot;bbFrequencyRangeErr&quot;</span>          <span class="p">:</span> <span class="o">-</span><span class="mi">103</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidSpanErr&quot;</span>             <span class="p">:</span> <span class="o">-</span><span class="mi">102</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidScaleErr&quot;</span>            <span class="p">:</span> <span class="o">-</span><span class="mi">101</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidDetectorErr&quot;</span>         <span class="p">:</span> <span class="o">-</span><span class="mi">100</span><span class="p">,</span>

		<span class="c"># General Errors</span>
		<span class="s">&quot;bbDeviceConnectionErr&quot;</span>        <span class="p">:</span> <span class="o">-</span><span class="mi">14</span><span class="p">,</span>
		<span class="s">&quot;bbPacketFramingErr&quot;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">13</span><span class="p">,</span>
		<span class="s">&quot;bbGPSErr&quot;</span>                     <span class="p">:</span> <span class="o">-</span><span class="mi">12</span><span class="p">,</span>
		<span class="s">&quot;bbGainNotSetErr&quot;</span>              <span class="p">:</span> <span class="o">-</span><span class="mi">11</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceNotIdleErr&quot;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceInvalidErr&quot;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span>
		<span class="s">&quot;bbBufferTooSmallErr&quot;</span>          <span class="p">:</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span>
		<span class="s">&quot;bbNullPtrErr&quot;</span>                 <span class="p">:</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span>
		<span class="s">&quot;bbAllocationLimitErr&quot;</span>         <span class="p">:</span> <span class="o">-</span><span class="mi">6</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceAlreadyStreamingErr&quot;</span>  <span class="p">:</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span>
		<span class="s">&quot;bbInvalidParameterErr&quot;</span>        <span class="p">:</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span>     <span class="p">:</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceNotStreamingErr&quot;</span>      <span class="p">:</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span>
		<span class="s">&quot;bbDeviceNotOpenErr&quot;</span>           <span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>

		<span class="c"># No Error</span>
		<span class="s">&quot;bbNoError&quot;</span>                    <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

		<span class="c"># Warnings/Messages</span>
		<span class="s">&quot;bbAdjustedParameter&quot;</span>          <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s">&quot;bbADCOverflow&quot;</span>                <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
		<span class="s">&quot;bbNoTriggerFound&quot;</span>             <span class="p">:</span> <span class="mi">3</span>
	<span class="p">}</span>

	<span class="n">rawDataArrSize</span> <span class="o">=</span> <span class="mi">299008</span>
	<span class="n">rawSweepTriggerArraySize</span> <span class="o">=</span> <span class="mi">68</span>

	<span class="n">devType</span> <span class="o">=</span> <span class="bp">None</span>

	<span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&quot;Main.DeviceInt&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">devOpen</span> <span class="o">=</span> <span class="bp">False</span>

		<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span><span class="p">:</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Opening DLL&quot;</span><span class="p">)</span>
			<span class="n">libPath</span> <span class="o">=</span> <span class="n">ctu</span><span class="o">.</span><span class="n">find_library</span><span class="p">(</span><span class="s">&quot;bb_api.dll&quot;</span><span class="p">)</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="n">libPath</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;bb_api.dll&quot;</span><span class="p">):</span>  <span class="c"># This is a messy hack, but it makes imports work with my scripts. I should</span>
													<span class="c"># Really put the signal hound DLL on my $PATH, but whatever</span>
					<span class="n">libPath</span> <span class="o">=</span> <span class="s">&quot;bb_api.dll&quot;</span>
				<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;../bb_api.dll&quot;</span><span class="p">):</span>
					<span class="n">libPath</span> <span class="o">=</span> <span class="s">&quot;../bb_api.dll&quot;</span>

				<span class="c"># So, apparently despite the fact that the setup.py script drops the signal hound</span>
				<span class="c"># dll in the python/DLLs directory, and the fact that that directory is in sys.path,</span>
				<span class="c"># find_library somehow doesn&#39;t find it anyways.</span>
				<span class="c"># As such, manually check the DLLs directory for the signalHound dll</span>
				<span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exec_prefix</span><span class="p">,</span> <span class="s">&quot;DLLs&quot;</span><span class="p">,</span> <span class="s">&quot;bb_api.dll&quot;</span><span class="p">)):</span>
					<span class="n">libPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">exec_prefix</span><span class="p">,</span> <span class="s">&quot;DLLs&quot;</span><span class="p">,</span> <span class="s">&quot;bb_api.dll&quot;</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Could not locate signal hound DLL.&quot;</span><span class="p">)</span>
					<span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s">&quot;Required DLL not available on system PATH&quot;</span><span class="p">)</span>


			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Found dll located at </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">libPath</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">dll</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">CDLL</span> <span class="p">(</span><span class="n">libPath</span><span class="p">)</span>

			<span class="c"># This is horrible ctypes DLL hackery</span>
			<span class="c"># You need to access the internal DLL handle to properly force windows to close the dll handle, which</span>
			<span class="c"># is the only way to COMPLETELY close the device interface.</span>

			<span class="c"># It&#39;s needed if you ever want to completely close the device, to re-initialize the device interface.</span>
			<span class="c"># ctypes doesn&#39;t make manually deallocating a dll easy.</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">dllHandle</span> <span class="o">=</span> <span class="n">wt</span><span class="o">.</span><span class="n">HMODULE</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>



		<span class="k">elif</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;linux&quot;</span> <span class="ow">or</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;linux2&quot;</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Linux Not supported for API Verson 2.x!&quot;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Linux Not supported for API Verson 2.x!&quot;</span><span class="p">)</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">cRawSweepCallbackFunc</span> <span class="o">=</span> <span class="bp">None</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">openDevice</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">sequentialADCErrors</span> <span class="o">=</span> <span class="mi">0</span>

	<span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Deleting SignalHound Interface Class&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">forceClose</span><span class="p">()</span>

<div class="viewcode-block" id="SignalHound.forceClose"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.forceClose">[docs]</a>	<span class="k">def</span> <span class="nf">forceClose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Force Closing.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">devOpen</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">closeDevice</span><span class="p">()</span>

		<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">cRawSweepCallbackFunc</span><span class="p">:</span>
			<span class="k">del</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cRawSweepCallbackFunc</span><span class="p">)</span>


		<span class="c"># Note: This is *probably* not needed. I was having some issues with dangling handles when doing</span>
		<span class="c"># multople-process data-logging, and it was part of the debugging effort from that.</span>
		<span class="c"># At this point, it&#39;s probably uneeded (it wasn&#39;t the root of the issue), but it&#39;s</span>
		<span class="c"># harmless, and I figure it&#39;s better to explicitly clean-up the DLL handle then</span>
		<span class="c"># rely on it happening automatically</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Forcing DLL handle closed&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span> <span class="o">==</span> <span class="s">&quot;win32&quot;</span><span class="p">:</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="n">ct</span><span class="o">.</span><span class="n">windll</span><span class="o">.</span><span class="n">kernel32</span><span class="o">.</span><span class="n">FreeLibrary</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dllHandle</span><span class="p">)</span>
			<span class="k">except</span> <span class="n">ct</span><span class="o">.</span><span class="n">ArgumentError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Argument error in forcing DLL closed&quot;</span><span class="p">)</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>



</div>
<div class="viewcode-block" id="SignalHound.openDevice"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.openDevice">[docs]</a>	<span class="k">def</span> <span class="nf">openDevice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Opening Device&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">deviceHandlePnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbOpenDevice</span><span class="p">(</span><span class="n">deviceHandlePnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">hf</span><span class="o">.</span><span class="n">bbNoError</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">bbNullPtrErr</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Could not open device due to null-pointer error!&quot;</span><span class="p">)</span>
			<span class="k">elif</span> <span class="n">ret</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">bbDeviceNotOpenErr</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Could not open device!&quot;</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Could not open device due to unknown reason!&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">devOpen</span> <span class="o">=</span> <span class="bp">True</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">devType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDeviceType</span><span class="p">()</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Opened Device with handle num: </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.closeDevice"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.closeDevice">[docs]</a>	<span class="k">def</span> <span class="nf">closeDevice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Closing Device with handle num: </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbAbort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Running acquistion aborted.&quot;</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Could not abort acquisition: </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>


		<span class="n">ret</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbCloseDevice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="n">hf</span><span class="o">.</span><span class="n">bbNoError</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Error closing device!&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Closed Device with handle num: </span><span class="si">%s</span><span class="s">&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">devOpen</span> <span class="o">=</span> <span class="bp">False</span>

</div>
<div class="viewcode-block" id="SignalHound.queryDeviceDiagnostics"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.queryDeviceDiagnostics">[docs]</a>	<span class="k">def</span> <span class="nf">queryDeviceDiagnostics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">raise</span> <span class="ne">DeprecationWarning</span><span class="p">(</span><span class="s">&quot;This function is no longer supported in the 2.0 SignalHound API&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.getDeviceDiagnostics"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getDeviceDiagnostics">[docs]</a>	<span class="k">def</span> <span class="nf">getDeviceDiagnostics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbGetDeviceDiagnostics(int device, float *temperature, float *voltage1_8, float *voltage1_2, float *voltageUSB, float *currentUSB);</span>

<span class="sd">		temperature  Pointer to 32bit float. If the function is successful temperature will point</span>
<span class="sd">				to the current internal device temperature, in degrees Celsius. See</span>
<span class="sd">				&quot;bbSelfCal&quot; for an explanation on why you need to monitor the device</span>
<span class="sd">				temperature.</span>
<span class="sd">		voltageUSB  USB operating voltage, in volts. Acceptable ranges are 4.40 to 5.25 V.</span>
<span class="sd">		currentUSB  USB current draw, in mA. Acceptable ranges are 800 - 1000 mA</span>

<span class="sd">		Pass NULL to any parameter you do not wish to query.</span>
<span class="sd">		The device temperature is updated in the API after each sweep is retrieved. The temperature is returned</span>
<span class="sd">		in Celsius and has a resolution of 1/8 th of a degree. A temperature above 70 ° C or below 0 ° C indicates</span>
<span class="sd">		your device is operating outside of its normal operating temperature, and may cause readings to be out</span>
<span class="sd">		of spec, and may damage the device.</span>
<span class="sd">		A USB voltage of below 4.4V may cause readings to be out of spec. Check your cable for damage and</span>
<span class="sd">		USB connectors for damage or oxidation.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="c"># self.log.info(&quot;Querying device diagnostics.&quot;)</span>
		<span class="n">temperature</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">voltageUSB</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">currentUSB</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">temperaturePnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">temperature</span><span class="p">)</span>
		<span class="n">voltageUSBPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">voltageUSB</span><span class="p">)</span>
		<span class="n">currentUSBPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">currentUSB</span><span class="p">)</span>



		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetDeviceDiagnostics</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">temperaturePnt</span><span class="p">,</span> <span class="n">voltageUSBPnt</span><span class="p">,</span> <span class="n">currentUSBPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="k">pass</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error!&quot;</span><span class="p">)</span>



		<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;temperature&quot;</span> <span class="p">:</span>  <span class="n">temperature</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s">&quot;voltageUSB&quot;</span>  <span class="p">:</span>  <span class="n">voltageUSB</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s">&quot;currentUSB&quot;</span>  <span class="p">:</span>  <span class="n">currentUSB</span><span class="o">.</span><span class="n">value</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="s">&quot;currentUSB&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mf">4.4</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s">&quot;USB Supply voltage below specified minimum of 4.4V. Please check hardware. Read supply voltage = </span><span class="si">%f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">ret</span><span class="p">[</span><span class="s">&quot;currentUSB&quot;</span><span class="p">])</span>

		<span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="s">&quot;temperature&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">70</span> <span class="ow">or</span> <span class="n">ret</span><span class="p">[</span><span class="s">&quot;temperature&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">EnvironmentError</span><span class="p">(</span><span class="s">&quot;Hardware temperature outside of normal operating bounds.&quot;</span><span class="p">)</span>

		<span class="c"># self.log.info(&quot;Diagnostics queried. Values = \n%s&quot;, &quot;\n&quot;.join([&quot;	{key}, {value}&quot;.format(key=key, value=value) for key, value in ret.iteritems()]))</span>
		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="SignalHound.queryStreamInfo"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.queryStreamInfo">[docs]</a>	<span class="k">def</span> <span class="nf">queryStreamInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>


		<span class="n">return_len</span>         <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">bandwidth</span>          <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">samples_per_sec</span>    <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">return_lenPnt</span>      <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">return_len</span><span class="p">)</span>
		<span class="n">bandwidthPnt</span>       <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">bandwidth</span><span class="p">)</span>
		<span class="n">samples_per_secPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">samples_per_sec</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbQueryStreamInfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">return_lenPnt</span><span class="p">,</span> <span class="n">bandwidthPnt</span><span class="p">,</span> <span class="n">samples_per_secPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="k">pass</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The device specified is not currently streaming!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error!&quot;</span><span class="p">)</span>

		<span class="c"># The raw data array returned by fetchRaw when in streaming mode is the value of return_len * 2 (since each value is two floats)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">rawDataArrSize</span> <span class="o">=</span> <span class="n">return_len</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="mi">2</span>

		<span class="n">values</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;return_len&quot;</span>      <span class="p">:</span> <span class="n">return_len</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s">&quot;samples_per_sec&quot;</span> <span class="p">:</span> <span class="n">bandwidth</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s">&quot;bandwidth&quot;</span>       <span class="p">:</span> <span class="n">samples_per_sec</span><span class="o">.</span><span class="n">value</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="n">values</span>
</div>
<div class="viewcode-block" id="SignalHound.configureAcquisition"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureAcquisition">[docs]</a>	<span class="k">def</span> <span class="nf">configureAcquisition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">detector</span><span class="p">,</span> <span class="n">scale</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureAcquisition(int device, unsigned int detector, unsigned int scale);</span>

<span class="sd">		detectorType  Specifies the video detector. The two possible values for detector type</span>
<span class="sd">				are BB_AVERAGE and BB_MIN_AND_MAX.</span>
<span class="sd">		verticalScale  Specifies the scale in which sweep results are returned int. The four</span>
<span class="sd">				possible values for verticalScale are BB_LOG_SCALE, BB_LIN_SCALE,</span>
<span class="sd">				BB_LOG_FULL_SCALE, and BB_LIN_FULL_SCALE</span>

<span class="sd">		The verticalScale parameter will change the units of returned sweeps. If BB_LOG_SCALE is provided</span>
<span class="sd">		sweeps will be returned in amplitude unit dBm. If BB_LIN_SCALE is return, the returned units will be in</span>
<span class="sd">		millivolts. If the full scale units are specified, no corrections are applied to the data and amplitudes are</span>
<span class="sd">		taken directly from the full scale input.</span>
<span class="sd">		detectorType specifies how to produce the results of the signal processing for the final sweep.</span>
<span class="sd">		Depending on settings, potentially many overlapping FFTs will be performed on the input time domain</span>
<span class="sd">		data to retrieve a more consistent and accurate final result. When the results overlap detectorType</span>
<span class="sd">		chooses whether to average the results together, or maintain the minimum and maximum values. If</span>
<span class="sd">		averaging is chosen the min and max trace arrays returned from bbFetchTrace will contain the same</span>
<span class="sd">		averaged data</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;detector&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">detector</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scale</span>

		<span class="n">detectorVals</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;min-max&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_MIN_AND_MAX</span><span class="p">),</span>
			<span class="s">&quot;average&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_AVERAGE</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="n">scaleVals</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;log-scale&quot;</span>      <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_LOG_SCALE</span><span class="p">),</span>
			<span class="s">&quot;log-full-scale&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_LOG_FULL_SCALE</span><span class="p">),</span>
			<span class="s">&quot;lin-scale&quot;</span>      <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_LIN_SCALE</span><span class="p">),</span>
			<span class="s">&quot;lin-full-scale&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_LIN_FULL_SCALE</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device acquisition configuration.&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">detector</span> <span class="ow">in</span> <span class="n">detectorVals</span><span class="p">:</span>
			<span class="n">detector</span> <span class="o">=</span> <span class="n">detectorVals</span><span class="p">[</span><span class="n">detector</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Invalid Detector mode! Detector  must be one of </span><span class="si">%s</span><span class="s">. Specified detector = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">detectorVals</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">detector</span><span class="p">))</span>

		<span class="k">if</span> <span class="n">scale</span> <span class="ow">in</span> <span class="n">scaleVals</span><span class="p">:</span>
			<span class="n">scale</span> <span class="o">=</span> <span class="n">scaleVals</span><span class="p">[</span><span class="n">scale</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Invalid Scaling mode! Scaling mode must be one of </span><span class="si">%s</span><span class="s">. Specified scale = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scaleVals</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">scale</span><span class="p">))</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureAcquisition</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">detector</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureAcquisition succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidDetectorErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Invalid Detector mode!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidScaleErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Invalid scale setting error!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureAcquisition! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.configureCenterSpan"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureCenterSpan">[docs]</a>	<span class="k">def</span> <span class="nf">configureCenterSpan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">span</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureCenterSpan(int device, double center, double span);</span>

<span class="sd">		center 	Center frequency in hertz.</span>
<span class="sd">		span  	Span in hertz</span>

<span class="sd">		This function configures the operating frequency band of the broadband device. Start and stop</span>
<span class="sd">		frequencies can be determined from the center and span.</span>
<span class="sd">		-  start = center - (span/2)</span>
<span class="sd">		-  stop = center+(span/2)</span>
<span class="sd">		The values provided are used by the device during initialization and a more precise start frequency is</span>
<span class="sd">		returned after initiation. Refer to the bbQueryTraceInfo function for more information.</span>
<span class="sd">		Each device has a specified operational frequency range. These limits are BB#_MIN_FREQ and</span>
<span class="sd">		BB#_MAX_FREQ. The center and span provided cannot specify a sweep outside of this range.</span>
<span class="sd">		There is also an absolute minimum operating span.</span>
<span class="sd">		Certain modes of operation have specific frequency range limits. Those mode dependent limits are</span>
<span class="sd">		tested against during initialization and not here.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;center_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">center</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">span</span>



		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device frequency center &amp; span settings.&quot;</span><span class="p">)</span>
		<span class="n">center</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
		<span class="n">span</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">span</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureCenterSpan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">span</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureCenterSpan succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidSpanErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The span provided is less than the minimum acceptable span.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbFrequencyRangeErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The calculated start or stop frequencies fall outside of the operational frequency range of the specified device.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureCenterSpan! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.configureLevel"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureLevel">[docs]</a>	<span class="k">def</span> <span class="nf">configureLevel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">atten</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureLevel(int device, double ref, double atten);</span>

<span class="sd">		Reference and attenuation in dBm</span>
<span class="sd">		ref		Reference level in dBm.</span>
<span class="sd">		atten		Attenuation setting in dB. If attenuation provided is negative,</span>
<span class="sd">			attenuation is selected automatically.</span>

<span class="sd">		When automatic gain is selected, the API uses the reference level provided to choose the best gain</span>
<span class="sd">		settings for an input signal with amplitude equal to reference level. If a gain other than BB_AUTO_GAIN</span>
<span class="sd">		is specified using bbConfigureGain, the reference level parameter is ignored.</span>
<span class="sd">		The atten parameter controls the RF input attenuator, and is adjustable from 0 to 30 dB in 10 dB steps.</span>
<span class="sd">		The RF attenuator is the first gain control device in the front end.</span>
<span class="sd">		When attenuation is automatic, the attenuation and gain for each band is selected independently. When</span>
<span class="sd">		attenuation is not automatic, a flat attenuation is set across the entire spectrum. A set attenuation may</span>
<span class="sd">		produce a non-flat noise floor.</span>
<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;ref_level&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ref</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;in_atten&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">atten</span>


		<span class="k">if</span> <span class="n">atten</span> <span class="o">==</span> <span class="s">&quot;auto&quot;</span><span class="p">:</span>
			<span class="n">atten</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

		<span class="k">if</span> <span class="n">atten</span> <span class="o">%</span> <span class="mi">10</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">atten</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Attenuator value must be a multiple of 10. Passed value of </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">atten</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device reference level and attentuation.&quot;</span><span class="p">)</span>
		<span class="n">ref</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">ref</span><span class="p">)</span>
		<span class="n">atten</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">atten</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureLevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">ref</span><span class="p">,</span> <span class="n">atten</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureLevel succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbReferenceLevelErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The reference level provided exceeds 20 dBm.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbAttenuationErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The attenuation value provided exceeds 30 db.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureLevel! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="k">return</span>
</div>
<div class="viewcode-block" id="SignalHound.configureGain"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureGain">[docs]</a>	<span class="k">def</span> <span class="nf">configureGain</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gain</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureGain(int device, int gain);</span>

<span class="sd">		gain		A gain setting</span>

<span class="sd">		To return the device to automatically choose the best gain setting, call this function with a gain of</span>
<span class="sd">		BB_AUTO_GAIN.</span>
<span class="sd">		The gain choices for each device range from 0 to BB#_MAX_GAIN.</span>
<span class="sd">		When BB_AUTO_GAIN is selected, the API uses the reference level provided in bbConfigureLevel to</span>
<span class="sd">		choose the best gain setting for an input signal with amplitude equal to the reference level provided.</span>
<span class="sd">		After the RF input attenuator (0-30 dB), the RF path contains an additional amplifier stage after band</span>
<span class="sd">		filtering, which is selected for medium or high gain and bypassed for low or no gain.</span>
<span class="sd">		Additionally, the IF has an amplifier which is bypassed only for a gain of zero.</span>
<span class="sd">		For the highest gain settings, additional amplification in the ADC stage is used.</span>
<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rf_gain&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gain</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device reference gain.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">gain</span> <span class="o">==</span> <span class="s">&quot;auto&quot;</span><span class="p">:</span>
			<span class="n">gain</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB60_MAX_GAIN</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">gain</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">gain</span><span class="p">)</span>
		<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s">&quot;Gain value must be an integer value, or </span><span class="se">\&quot;</span><span class="s">auto</span><span class="se">\&quot;</span><span class="s">&quot;</span><span class="p">)</span>
			<span class="k">raise</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureGain</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">gain</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureGain succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidGainErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The specified gain value is outside the range of possible gains. Valid values are 0-</span><span class="si">%d</span><span class="s">, or </span><span class="se">\&quot;</span><span class="s">auto</span><span class="se">\&quot;</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB60_MAX_GAIN</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureGain! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="k">return</span>

</div>
<div class="viewcode-block" id="SignalHound.configureSweepCoupling"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureSweepCoupling">[docs]</a>	<span class="k">def</span> <span class="nf">configureSweepCoupling</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rbw</span><span class="p">,</span> <span class="n">vbw</span><span class="p">,</span> <span class="n">sweepTime</span><span class="p">,</span> <span class="n">rbwType</span><span class="p">,</span> <span class="n">rejection</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureSweepCoupling(int device, double rbw, double vbw, double sweepTime, unsigned int rbwType, unsigned int rejection);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		rbw  	Resolution bandwidth in Hz. Use the bandwidth table in the appendix to</span>
<span class="sd">				determine good values to choose. As of 1.07 in non-native mode, RBW</span>
<span class="sd">				can be arbitrary. Therefore you may choose values not in the table and</span>
<span class="sd">				they will not clamp.</span>
<span class="sd">		vbw  Video bandwidth (VBW) in Hz. VBW must be less than or equal to RBW.</span>
<span class="sd">				VBW can be arbitrary. For best performance use RBW as the VBW.</span>
<span class="sd">		sweepTime  Sweep time in seconds.</span>
<span class="sd">				In sweep mode, this value is how long the device collects data before it</span>
<span class="sd">				begins processing. Maximum values to be provided should be around</span>
<span class="sd">				100ms.</span>
<span class="sd">				In the real-time configuration, this value represents the length of time</span>
<span class="sd">				data is collected and compounded before returning a sweep. Values for</span>
<span class="sd">				real-time should be between 16ms-100ms for optimal viewing and use.</span>
<span class="sd">				In zero span mode this is the length of the returned sweep as a measure</span>
<span class="sd">				of time. Sweep times for zero span must range between 10us and</span>
<span class="sd">				100ms. Values outside this range are clamped.</span>
<span class="sd">		rbwType  The possible values for rbwType are BB_NATIVE_RBW and</span>
<span class="sd">				BB_NON_NATIVE_RBW. This choice determines which bandwidth table</span>
<span class="sd">				is used and how the data is processed. BB_NATIVE_RBW is default and</span>
<span class="sd">				unchangeable for real-time operation.</span>
<span class="sd">		rejection  The possible values for rejection are BB_NO_SPUR_REJECT,</span>
<span class="sd">				BB_SPUR_REJECT, and BB_BYPASS_RF.</span>

<span class="sd">		The resolution bandwidth, or RBW, represents the bandwidth of spectral energy represented in each</span>
<span class="sd">		frequency bin. For example, with an RBW of 10 kHz, the amplitude value for each bin would represent</span>
<span class="sd">		the total energy from 5 kHz below to 5 kHz above the bin&#39;s center. For standard bandwidths, the API</span>
<span class="sd">		uses the 3 dB points to define the RBW.</span>
<span class="sd">		The video bandwidth, or VBW, is applied after the signal has been converted to frequency domain as</span>
<span class="sd">		power, voltage, or log units. It is implemented as a simple rectangular window, averaging the amplitude</span>
<span class="sd">		readings for each frequency bin over several overlapping FFTs. A signal whose amplitude is modulated at</span>
<span class="sd">		Test Equipment Plus | 17</span>
<span class="sd">		a much higher frequency than the VBW will be shown as an average, whereas amplitude modulation at</span>
<span class="sd">		a lower frequency will be shown as a minimum and maximum value.</span>
<span class="sd">		Native RBWs represent the bandwidths from a single power-of-2 FFT using our sample rate of 80 MSPS</span>
<span class="sd">		and a high dynamic range window function. Each RBW is half of the previous. Using native RBWs can</span>
<span class="sd">		give you the lowest possible bandwidth for any given sweep time, and minimizes processing power.</span>
<span class="sd">		However, scalloping losses of up to 0.8 dB, occurring when a signal falls in between two bins, can cause</span>
<span class="sd">		problems for some types of measurements.</span>
<span class="sd">		Non-native RBWs use the traditional 1-3-10 sequence. As of version 1.0.7, non-native bandwidths are</span>
<span class="sd">		not restricted to the 1-3-10 sequence but can be arbitrary. Programmatically, non-native RBW&#39;s are</span>
<span class="sd">		achieved by creating variable sized bandwidth flattop windows.</span>
<span class="sd">		sweepTime applies to regular sweep mode and real-time mode. If in sweep mode, sweepTime is the</span>
<span class="sd">		amount of time the device will spend collecting data before processing. Increasing this value is useful for</span>
<span class="sd">		capturing signals of interest or viewing a more consistent view of the spectrum. Increasing sweepTime</span>
<span class="sd">		has a very large impact on the amount of resources used by the API due to the increase of data needing</span>
<span class="sd">		to be stored and the amount of signal processing performed. For this reason, increasing sweepTime also</span>
<span class="sd">		decreases the rate at which you can acquire sweeps.</span>
<span class="sd">		In real-time, sweepTime refers to how long data is accumulated before returning a sweep. Ensure you</span>
<span class="sd">		are capable of retrieving as many sweeps that will be produced by changing this value. For instance,</span>
<span class="sd">		changing sweepTime to 32ms in real-time mode will return approximately 31 sweeps per second</span>
<span class="sd">		(1000/32).</span>
<span class="sd">		Rejection can be used to optimize certain aspects of the signal. Default is BB_NO_SPUR_REJECT, and</span>
<span class="sd">		should be used in most cases. If you have a steady CW or slowly changing signal, and need to minimize</span>
<span class="sd">		image and spurious responses from the device, use BB_SPUR_REJECT. If you have a signal between 300</span>
<span class="sd">		MHz and 3 GHz, need the lowest possible phase noise, and do not need any image rejection,</span>
<span class="sd">		BB_BYPASS_RF can be used to rewire the front end for lowest phase noise.</span>


<span class="sd">		Native Bandwidths (Hz)      FFT size</span>
<span class="sd">		        10.10e6              16</span>
<span class="sd">		         5.050e6             32</span>
<span class="sd">		         2.525e6             64</span>
<span class="sd">		         1.262e6            128</span>
<span class="sd">		       631.2e3              256  Largest Real-Time RBW</span>
<span class="sd">		       315.6e3              512</span>
<span class="sd">		       157.1e3             1024</span>
<span class="sd">		        78.90e3            2048</span>
<span class="sd">		        39.45e3            4096</span>
<span class="sd">		        19.72e3            8192</span>
<span class="sd">		         9.863e3          16384</span>
<span class="sd">		         4.931e3          32768</span>
<span class="sd">		         2.465e3          65536  Smallest Real-Time RBW</span>
<span class="sd">		         1.232e3         131072</span>
<span class="sd">		       616.45            262144</span>
<span class="sd">		       308.22            524288</span>
<span class="sd">		       154.11           1048576</span>
<span class="sd">		       154.11           1048576</span>
<span class="sd">		        77.05           2097152</span>
<span class="sd">		        38.52           4194304</span>
<span class="sd">		        19.26           8388608</span>
<span class="sd">		         9.63          16777549</span>
<span class="sd">		         4.81          33554432</span>
<span class="sd">		         2.40          67108864</span>
<span class="sd">		         1.204        134217728</span>
<span class="sd">		         0.602        268435456</span>
<span class="sd">		         0.301        536870912</span>

<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device sweep coupling settings.&quot;</span><span class="p">)</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rbw&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">rbw</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;vbw&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">vbw</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;sweepTime&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sweepTime</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rbwType&quot;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">rbwType</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rejection&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rejection</span>

		<span class="n">rbw</span>        <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">rbw</span><span class="p">)</span>
		<span class="n">vbw</span>        <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">vbw</span><span class="p">)</span>
		<span class="n">sweepTime</span>  <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">sweepTime</span><span class="p">)</span>


		<span class="n">rbwVals</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;native&quot;</span>     <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_NATIVE_RBW</span><span class="p">),</span>
			<span class="s">&quot;non-native&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_NON_NATIVE_RBW</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="n">rejectionVals</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;no-spur-reject&quot;</span> <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_NO_SPUR_REJECT</span><span class="p">),</span>
			<span class="s">&quot;spur-reject&quot;</span>    <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_SPUR_REJECT</span><span class="p">),</span>
			<span class="s">&quot;bypass&quot;</span>         <span class="p">:</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_BYPASS_RF</span><span class="p">)</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">rbwType</span> <span class="ow">in</span> <span class="n">rbwVals</span><span class="p">:</span>
			<span class="n">rbwType</span>  <span class="o">=</span> <span class="n">rbwVals</span><span class="p">[</span><span class="n">rbwType</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;rbwType must be either </span><span class="se">\&quot;</span><span class="s">native</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">non-native</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">rbwType</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">rejection</span> <span class="ow">in</span> <span class="n">rejectionVals</span><span class="p">:</span>
			<span class="n">rejection</span>    <span class="o">=</span> <span class="n">rejectionVals</span><span class="p">[</span><span class="n">rejection</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;rejection must be either </span><span class="se">\&quot;</span><span class="s">no-spur-reject</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">spur-reject</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">bypass</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">rejection</span><span class="p">)</span>



		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureSweepCoupling</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">rbw</span><span class="p">,</span> <span class="n">vbw</span><span class="p">,</span> <span class="n">sweepTime</span><span class="p">,</span> <span class="n">rbwType</span><span class="p">,</span> <span class="n">rejection</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;configureSweepCoupling Succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbBandwidthErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;&#39;rbw&#39; falls outside device limits or &#39;vbw&#39; is greater than resolution bandwidth.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidBandwidthTypeErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;&#39;rbwType&#39; is not one of the accepted values.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;&#39;rejection&#39; value is not one of the accepted values.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureSweepCoupling! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="SignalHound.configureIQ"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureIQ">[docs]</a>	<span class="k">def</span> <span class="nf">configureIQ</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">downsample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureIQ(int device, int downsampleFactor, double bandwidth);</span>

<span class="sd">		downsampleFactor  Specify a decimation rate for the 40MS/s IQ digital stream.</span>
<span class="sd">		bandwidth         Specify a bandpass filter width on the IQ digital stream.</span>

<span class="sd">		Downsample factor settings:</span>
<span class="sd">		Decimation-Rate  Sample Rate (IQ pairs/s)  Maximum Bandwidth</span>
<span class="sd">		1                40 MS/s                   27 MHz</span>
<span class="sd">		2                20 MS/s                   17.8 MHz</span>
<span class="sd">		4                10 MS/s                   8.0 MHz</span>
<span class="sd">		8                5 MS/s                    3.75 MHz</span>
<span class="sd">		16               2.5 MS/s                  2.0 MHz</span>
<span class="sd">		32               1.25 MS/s                 1.0 MHz</span>
<span class="sd">		64               0.625 MS/s                0.5 MHz</span>
<span class="sd">		128              0.3125 MS/s               0.125 MHz</span>

<span class="sd">		This function is used to configure the digital IQ data stream. A decimation factor and filter bandwidth</span>
<span class="sd">		are able to be specified. The decimation rate divides the IQ sample rate directly while the bandwidth</span>
<span class="sd">		parameter further filters the digital stream.</span>
<span class="sd">		For each given decimation rate, a maximum bandwidth value must be supplied to account for sufficient</span>
<span class="sd">		filter rolloff. That table is above. See  bbFetchRaw() for polling the IQ data stream</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="n">validDecimationFactors</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">)]</span>
		<span class="c"># Resolves to [1, 2, 4, 8, 16, 32, 64, 128]</span>
		<span class="k">if</span> <span class="n">downsample</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">validDecimationFactors</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Decimation ratio must be one of values: </span><span class="si">%s</span><span class="s">. Specified value: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">validDecimationFactors</span><span class="p">,</span> <span class="n">downsample</span><span class="p">))</span>


		<span class="n">bandwidth</span>  <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">bandwidth</span><span class="p">)</span>
		<span class="n">downsample</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">downsample</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureIQ</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">downsample</span><span class="p">,</span> <span class="n">bandwidth</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;configureSweepCoupling Succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The downsample rate is outside the acceptable input range or the downsample rate is not a power of two.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbClampedToLowerLimit&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The bandpass filter width specified is lower than  BB_MIN_IQ_BW&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbClampedToUpperLimit&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Warning that the bandpass filter width was clamped to the maximum value allowed by the downsampleFaction.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting bbConfigureIQ! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>




</div>
<div class="viewcode-block" id="SignalHound.configureWindow"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureWindow">[docs]</a>	<span class="k">def</span> <span class="nf">configureWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureWindow(int device, unsigned int window);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		window  The possible values for window are BB_NUTALL, BB_BLACKMAN,</span>
<span class="sd">				BB_HAMMING, and BB_FLAT_TOP.</span>

<span class="sd">		This changes the windowing function applied to the data before signal processing is performed. In real-</span>
<span class="sd">		time configuration the window parameter is permanently set to BB_NUTALL. The windows are only</span>
<span class="sd">		changeable when using the BB_NATIVE_RBW type in bbConfigureSweepCoupling. When using</span>
<span class="sd">		BB_NON_NATIVE_RBWs, a custom flattop window will be used.</span>
<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device FFT windowing function.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;fft_window&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">window</span>

		<span class="n">windows</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;nutall&quot;</span>   <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_NUTALL</span><span class="p">,</span>
			<span class="s">&quot;blackman&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_BLACKMAN</span><span class="p">,</span>
			<span class="s">&quot;hamming&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_HAMMING</span><span class="p">,</span>
			<span class="s">&quot;flat-top&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_FLAT_TOP</span>
		<span class="p">}</span>


		<span class="k">if</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">windows</span><span class="p">:</span>
			<span class="n">window</span> <span class="o">=</span> <span class="n">windows</span><span class="p">[</span><span class="n">window</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Window function name must be either </span><span class="se">\&quot;</span><span class="s">nutall</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">blackman</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">hamming</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">flat-top</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">window</span><span class="p">)</span>

		<span class="n">window</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>



		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureWindow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">window</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureWindow succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidWindowErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The specified windowing function is unknown.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureWindow! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="SignalHound.configureProcUnits"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureProcUnits">[docs]</a>	<span class="k">def</span> <span class="nf">configureProcUnits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">units</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureProcUnits(int device, unsigned int units);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		units  The possible values are BB_LOG, BB_VOLTAGE, BB_POWER, and</span>
<span class="sd">				BB_BYPASS.</span>

<span class="sd">		The units provided determines what unit type video processing occurs in. The chart below shows which</span>
<span class="sd">		unit types are used for each units selection.</span>
<span class="sd">		For “average power” measurements, BB_POWER should be selected. For cleaning up an amplitude</span>
<span class="sd">		modulated signal, BB_VOLTAGE would be a good choice. To emulate a traditional spectrum analyzer,</span>
<span class="sd">		select BB_LOG. To minimize processing power, select BB_BYPASS.</span>

<span class="sd">		BB_LOG      = dBm</span>
<span class="sd">		BB_VOLTAGE  = mV</span>
<span class="sd">		BB_POWER    = mW</span>
<span class="sd">		BB_BYPASS   = No video processing</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;data_units&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">units</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device video processing units.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">units</span> <span class="o">==</span> <span class="s">&quot;log&quot;</span><span class="p">:</span>
			<span class="n">units</span> <span class="o">=</span>  <span class="n">hf</span><span class="o">.</span><span class="n">BB_LOG</span>
		<span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s">&quot;voltage&quot;</span><span class="p">:</span>
			<span class="n">units</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_VOLTAGE</span>
		<span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s">&quot;power&quot;</span><span class="p">:</span>
			<span class="n">units</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_POWER</span>
		<span class="k">elif</span> <span class="n">units</span> <span class="o">==</span> <span class="s">&quot;bypass&quot;</span><span class="p">:</span>
			<span class="n">units</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_BYPASS</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Video processing unit name must be either </span><span class="se">\&quot;</span><span class="s">log</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">voltage</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">power</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">bypass</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">units</span><span class="p">)</span>

		<span class="n">units</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">units</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureProcUnits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">units</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureProcUnits succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidVideoUnitsErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The video-processing units did not match any available setting.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureProcUnits! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>


</div>
<div class="viewcode-block" id="SignalHound.configureTrigger"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureTrigger">[docs]</a>	<span class="k">def</span> <span class="nf">configureTrigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trigType</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureTrigger(int device, unsigned int type, unsigned int edge, double level, double timeout);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		type  Specifies the type of trigger to use. Possible values are</span>
<span class="sd">			BB_NO_TRIGGER, BB_VIDEO_TRIGGER, BB_EXTERNAL_TRIGGER, and</span>
<span class="sd">			BB_GPS_PPS_TRIGGER. If an external signal is desired, BNC port 2 must</span>
<span class="sd">			be configured to accept a trigger (see bbConfigureIO). When</span>
<span class="sd">			BB_NO_TRIGGER is specified, the other parameters are ignored and this</span>
<span class="sd">			function sets only trigger type.</span>
<span class="sd">		edge  Specifies the edge type of a video trigger. Possible values are</span>
<span class="sd">			BB_TRIGGER_RISING and BB_TRIGGER_FALLING. If you are using a</span>
<span class="sd">			trigger type other than a video trigger, this value is ignored but must be</span>
<span class="sd">			specified.</span>
<span class="sd">		level  Level of the video trigger. The units of this value are determined by the</span>
<span class="sd">			demodulation type used when initiating the device. If demodulating</span>
<span class="sd">			AM, level is in dBm units, if demodulating FM, level is in Hz.</span>
<span class="sd">		timeout  timeout specifies the length of a capture window in seconds. The</span>
<span class="sd">			capture window specifies the length of continuous time you wish to</span>
<span class="sd">			wait for a trigger. If no trigger is found within the window, the last</span>
<span class="sd">			sweepTime of data within the data is returned. The capture window</span>
<span class="sd">			must be greater than sweepTime. If it is not, it will be automatically</span>
<span class="sd">			adjusted to sweepTime. The timeout/capture window is applicable to</span>
<span class="sd">			both video and external triggering.</span>

<span class="sd">		Allows you to configure all zero-span trigger related variables. As with all configure routines, the</span>
<span class="sd">		changes made here are not reflected until the next initiate.</span>
<span class="sd">		When a trigger is specified the sweep returned will start approximately 200 microseconds before the</span>
<span class="sd">		trigger event. This provide a slight view of occurances directly before the event. If no trigger event is</span>
<span class="sd">		found, the data returned at the end of the timeout period is returned.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device trigger configuration.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;trigType&quot;</span><span class="p">]</span>     <span class="o">=</span> <span class="n">trigType</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;trig_edge&quot;</span><span class="p">]</span>    <span class="o">=</span> <span class="n">edge</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;trig_level&quot;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">level</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;trig_timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeout</span>

		<span class="n">videoTrigDict</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;rising-edge&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_TRIGGER_RISING</span><span class="p">,</span>
			<span class="s">&quot;falling-edge&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_TRIGGER_FALLING</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">trigType</span> <span class="o">==</span> <span class="s">&quot;none&quot;</span><span class="p">:</span>
			<span class="n">trigType</span> <span class="o">=</span>  <span class="n">hf</span><span class="o">.</span><span class="n">BB_NO_TRIGGER</span>
		<span class="k">elif</span> <span class="n">trigType</span> <span class="o">==</span> <span class="s">&quot;video&quot;</span><span class="p">:</span>
			<span class="n">trigType</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_VIDEO_TRIGGER</span>
		<span class="k">elif</span> <span class="n">trigType</span> <span class="o">==</span> <span class="s">&quot;external&quot;</span><span class="p">:</span>
			<span class="n">trigType</span> <span class="o">=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_EXTERNAL_TRIGGER</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;configureIO must be called to set up BNC port 2 as an input for proper external trigger operation&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">trigType</span> <span class="o">==</span> <span class="s">&quot;gps-pps&quot;</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;GPS PPS Trigger not supported in API files. Please contact Test-Equipment-Plus for more information.&quot;</span><span class="p">)</span>
			<span class="c"># self.log.warning(&quot;GPS synchronization is not tested, and the setup constants are partially just guessed. &quot;)</span>
			<span class="c"># trigType = hf.BB_GPS_PPS_TRIGGER</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Trigger type must be either </span><span class="se">\&quot;</span><span class="s">none</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">video</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">external</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">gps-pps</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">trigType</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">trigType</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_VIDEO_TRIGGER</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">edge</span> <span class="ow">in</span> <span class="n">videoTrigDict</span><span class="p">:</span>
				<span class="n">edge</span> <span class="o">=</span> <span class="n">videoTrigDict</span><span class="p">[</span><span class="n">trigType</span><span class="p">]</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Trigger type for vide-triggering must be either </span><span class="se">\&quot;</span><span class="s">rising-edge</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">falling-edge</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">edge</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="c"># Trigger type is ignored in all modes except BB_VIDEO_TRIGGER</span>
			<span class="n">edge</span> <span class="o">=</span>  <span class="n">hf</span><span class="o">.</span><span class="n">BB_TRIGGER_FALLING</span>


		<span class="n">trigType</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">trigType</span><span class="p">)</span>
		<span class="n">edge</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">edge</span><span class="p">)</span>
		<span class="n">level</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">level</span><span class="p">)</span>
		<span class="n">timeout</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureTrigger</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">trigType</span><span class="p">,</span> <span class="n">edge</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureTrigger succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;A parameter specified is not valid.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureTrigger! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.configureTimeGate"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureTimeGate">[docs]</a>	<span class="k">def</span> <span class="nf">configureTimeGate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">timeout</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureTimeGate(int device, double delay, double length, double timeout);</span>
<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		delay  The time in seconds, from the trigger to the beginning of the gate</span>
<span class="sd">		length  The length in seconds, of the gate</span>
<span class="sd">		timeout  The time in seconds to wait for a trigger. If no trigger is found, the last</span>
<span class="sd">				length will be used.</span>

<span class="sd">		Time gates are relative to an external trigger.</span>
<span class="sd">		Therefore it is necessary to use bbConfigureIO to setup an external trigger.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device external trigger time-gating settings.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;configureTimeGate is only valid for external trigger sources.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Please ensure you are set up to use an external trigger&quot;</span><span class="p">)</span>

		<span class="n">delay</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
		<span class="n">length</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
		<span class="n">timeout</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureTimeGate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureTimeGate succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;A parameter specified is not valid.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureTimeGate! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.configureRawSweep"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureRawSweep">[docs]</a>	<span class="k">def</span> <span class="nf">configureRawSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">ppf</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureRawSweep(int device, int start, int ppf, int steps, int stepsize);</span>
<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		start  Frequency value in MHz representing the center of the first 20MHz step</span>
<span class="sd">			in the sweep. Must be a multiple of 20, and no less than 20.</span>
<span class="sd">		ppf  Controls the amount of digital samples to collect at each frequency</span>
<span class="sd">			step. The number of digital samples collected at each frequency equals</span>
<span class="sd">			18688 * ppf.</span>
<span class="sd">		steps  Number of steps to take starting with and including the first steps.</span>
<span class="sd">		stepsize  Value must be BB_TWENTY_MHZ</span>

<span class="sd">		This function configures the device for both BB_RAW_SWEEP and BB_RAW_SWEEP_LOOP modes. This</span>
<span class="sd">		function allows you to configure the sweep start frequency, the number of 20 MHz steps to take across</span>
<span class="sd">		the spectrum, and how long to dwell at each frequency. There are restrictions on these settings,</span>
<span class="sd">		outlined below.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device raw sweep mode configuration.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">start</span> <span class="o">%</span> <span class="mi">20</span> <span class="o">!=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">start</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;The &#39;start&#39; parameter must be a multiple of 20MHz&quot;</span><span class="p">)</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">ppf</span> <span class="o">*</span> <span class="n">steps</span><span class="p">)</span> <span class="o">%</span> <span class="mi">16</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;(ppf * steps) must be a multiple of 16&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="n">steps</span> <span class="o">*</span> <span class="mi">20</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">6000</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;The final center frequency, obtained by the equation (start + steps*20), cannot be greater than 6000 (6 GHz).&quot;</span><span class="p">)</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;ppf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ppf</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;steps&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">steps</span>

		<span class="n">start</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>
		<span class="n">ppf</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">ppf</span><span class="p">)</span>
		<span class="n">steps</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
		<span class="n">stepSize</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_TWENTY_MHZ</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureRawSweep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">ppf</span><span class="p">,</span> <span class="n">steps</span><span class="p">,</span> <span class="n">stepSize</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureRawSweep succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;A parameter specified is not valid.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureRawSweep! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.configureIO"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureIO">[docs]</a>	<span class="k">def</span> <span class="nf">configureIO</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">port1Coupling</span><span class="p">,</span> <span class="n">port1mode</span><span class="p">,</span> <span class="n">port2mode</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureIO(int device, unsigned int port1, unsigned int port2);</span>
<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		port1  The first BNC port may be used to input or output a 10 MHz time base</span>
<span class="sd">			(AC or DC coupled), or to generate a general purpose logic high/low</span>
<span class="sd">			output. Please refer to the example below. All possible values for this</span>
<span class="sd">			port are found in the header file and are prefixed with “BB_PORT1”</span>
<span class="sd">		port2  Port 2 is capable of accepting an external trigger or generating a logic</span>
<span class="sd">			output. Port 2 is always DC coupled. All possible values for this port are</span>
<span class="sd">			found in the header file and are prefixed with “BB_PORT2.”</span>

<span class="sd">		NOTE: This function can only be called when the device is idle (not operating in any mode). To ensure</span>
<span class="sd">		the device is idle, call bbAbort().</span>
<span class="sd">		There are two configurable BNC connector ports available on the device. Both ports functionality are</span>
<span class="sd">		changed with this function. For both ports, ‘0’ is the default and can be supplied through this function to</span>
<span class="sd">		return the ports to their default values. Specifying a ‘0’ on port 1 returns the device to an internal time</span>
<span class="sd">		base and outputs the time base AC coupled. Specifying ‘0’ on port 2 emits a DC coupled logic low.</span>
<span class="sd">		For external 10 MHz timebases, best phase noise is achieved by using a low jitter 3.3V CMOS input.</span>
<span class="sd">		Configure combinations</span>


<span class="sd">		Port 1 IO  For port 1 only a coupled value must be ‘OR’ed</span>
<span class="sd">		together with a port type. Use the ‘|’ operator to</span>
<span class="sd">		combine a coupled type and a port type.</span>

<span class="sd">		BB_PORT1_AC_COUPLED               Denotes an AC coupled port</span>
<span class="sd">		BB_PORT1_DC_COUPLED               Denotes a DC coupled port</span>
<span class="sd">		BB_PORT1_INT_REF_OUT              Output the internal 10 MHz timebase</span>
<span class="sd">		BB_PORT1_EXT_REF_IN               Accept an external 10MHz time base</span>
<span class="sd">		BB_PORT1_OUT_LOGIC_LOW            Self-explanitory</span>
<span class="sd">		BB_PORT1_OUT_LOGIC_HIGH           Self-explanitory</span>

<span class="sd">		Port 2 IO</span>
<span class="sd">		BB_PORT2_OUT_LOGIC_LOW            Self-explanitory</span>
<span class="sd">		BB_PORT2_OUT_LOGIC_HIGH           Self-explanitory</span>
<span class="sd">		BB_PORT2_IN_TRIGGER_RISING_EDGE   When set, the device is notified of a rising edge</span>
<span class="sd">		BB_PORT_IN_TRIGGER_FALLING_EDGE   When set, the device is notified of a falling edge</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device IO Configuration.&quot;</span><span class="p">)</span>

		<span class="n">port1</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">port2</span> <span class="o">=</span> <span class="mi">0</span>

		<span class="n">p1CouplingOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;ac&quot;</span><span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_AC_COUPLED</span><span class="p">,</span>
			<span class="s">&quot;dc&quot;</span><span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_DC_COUPLED</span>
		<span class="p">}</span>

		<span class="n">p1ModeOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;int-ref-out&quot;</span>    <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_INT_REF_OUT</span><span class="p">,</span>
			<span class="s">&quot;ext-ref-in&quot;</span>     <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_EXT_REF_IN</span><span class="p">,</span>
			<span class="s">&quot;out-logic-low&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_OUT_LOGIC_LOW</span><span class="p">,</span>
			<span class="s">&quot;out-logic-high&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT1_OUT_LOGIC_HIGH</span>
		<span class="p">}</span>

		<span class="n">p2ModeOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;int-ref-out&quot;</span>    <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT2_IN_TRIGGER_RISING_EDGE</span><span class="p">,</span>
			<span class="s">&quot;ext-ref-in&quot;</span>     <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT2_IN_TRIGGER_FALLING_EDGE</span><span class="p">,</span>
			<span class="s">&quot;out-logic-low&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT2_OUT_LOGIC_LOW</span><span class="p">,</span>
			<span class="s">&quot;out-logic-high&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_PORT2_OUT_LOGIC_HIGH</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="n">port1Coupling</span> <span class="ow">in</span> <span class="n">p1CouplingOpts</span><span class="p">:</span>
			<span class="n">port1</span> <span class="o">|=</span> <span class="n">p1CouplingOpts</span><span class="p">[</span><span class="n">port1Coupling</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Port1Coupling must be either&#39;ac&#39; or &#39;dc&#39;. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">port1Coupling</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">port1mode</span> <span class="ow">in</span> <span class="n">p1ModeOpts</span><span class="p">:</span>
			<span class="n">port1</span> <span class="o">|=</span> <span class="n">p1ModeOpts</span><span class="p">[</span><span class="n">port1mode</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;port1mode must be one of </span><span class="si">%s</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p1ModeOpts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">port1mode</span><span class="p">))</span>



		<span class="k">if</span> <span class="n">port2mode</span> <span class="ow">in</span> <span class="n">p2ModeOpts</span><span class="p">:</span>
			<span class="n">port2</span> <span class="o">|=</span> <span class="n">p2ModeOpts</span><span class="p">[</span><span class="n">port2mode</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;port2mode must be either </span><span class="se">\&quot;</span><span class="s">int-ref-out</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">ext-ref-in</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">out-logic-low</span><span class="se">\&quot;</span><span class="s"> or </span><span class="se">\&quot;</span><span class="s">out-logic-high</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">port1mode</span><span class="p">)</span>


		<span class="n">port1</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">port1</span><span class="p">)</span>
		<span class="n">port2</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">port2</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureIO</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">port1</span><span class="p">,</span> <span class="n">port2</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureIO succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotIdleErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The device is currently operating in a mode. The device must be idle to configure ports.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;A parameter supplied is unknown.&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureIO! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.configureDemod"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.configureDemod">[docs]</a>	<span class="k">def</span> <span class="nf">configureDemod</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modulationType</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">ifBw</span><span class="p">,</span> <span class="n">audioLowPassFreq</span><span class="p">,</span> <span class="n">audioHighPassFreq</span><span class="p">,</span> <span class="n">fmDeemphasis</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbConfigureDemod(int device, int modulationType, double freq, float IFBW, float audioLowPassFreq, float audioHighPassFreq, float FMDeemphasis);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		modulationType  Specifies the demodulation scheme, possible values are</span>
<span class="sd">				BB_DEMOD_AM/FM/Upper sideband (USB)/Lower Sideband (LSB)/CW.</span>
<span class="sd">		freq  Center frequency. For best results, re-initiate the device if the center frequency changes +/- 8MHz from the initial value.</span>
<span class="sd">		IFBW  Intermediate frequency bandwidth centered on freq. Filter takes place</span>
<span class="sd">				before demodulation. Specified in Hz. Should be between 2kHz and 500kHz.</span>
<span class="sd">		audioLowPassFreq  Post demodulation filter in Hz. Should be between 1kHz and 12kHz Hz.</span>
<span class="sd">		audioHighPassFreq  Post demodulation filter in Hz. Should be between 20 and 1000Hz.</span>
<span class="sd">		FMDeemphasis  Specified in micro-seconds. Should be between 1 and 100.</span>

<span class="sd">		This function can be called while the device is active.</span>
<span class="sd">		Note : If any of the boundary conditions are not met, this function will return with no error but the</span>
<span class="sd">		values will be clamped to its boundary values</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Setting device demodulator Configuration.&quot;</span><span class="p">)</span>

		<span class="n">modTypeOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;am&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_AM</span><span class="p">,</span>
			<span class="s">&quot;fm&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_FM</span><span class="p">,</span>
			<span class="s">&quot;usb&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_USB</span><span class="p">,</span>
			<span class="s">&quot;lsb&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_LSB</span><span class="p">,</span>
			<span class="s">&quot;cw&quot;</span>  <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_CW</span>
		<span class="p">}</span>


		<span class="k">if</span> <span class="n">modulationType</span> <span class="ow">in</span> <span class="n">modTypeOpts</span><span class="p">:</span>
			<span class="n">modulationType</span> <span class="o">=</span> <span class="n">modTypeOpts</span><span class="p">[</span><span class="n">modulationType</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Modulation Type must be one of </span><span class="si">%s</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">modTypeOpts</span><span class="o">.</span><span class="n">keys</span><span class="p">(),</span> <span class="n">modulationType</span><span class="p">))</span>

		<span class="k">if</span> <span class="n">ifBw</span> <span class="o">&lt;</span> <span class="mf">2e3</span> <span class="ow">or</span> <span class="n">ifBw</span> <span class="o">&gt;</span> <span class="mf">500e3</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;IFBW Should be between 2kHz and 500kHz.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">audioLowPassFreq</span> <span class="o">&lt;</span> <span class="mf">1e3</span> <span class="ow">or</span> <span class="n">audioLowPassFreq</span> <span class="o">&gt;</span> <span class="mf">12e3</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Audio low-pass Should be between 1kHz and 12kHz Hz.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">audioHighPassFreq</span> <span class="o">&lt;</span> <span class="mi">20</span> <span class="ow">or</span> <span class="n">audioHighPassFreq</span> <span class="o">&gt;</span> <span class="mf">1e3</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Audio high-pass should be between 20 and 1000Hz.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">fmDeemphasis</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="n">fmDeemphasis</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;FM De-emphasis should be between 1 and 100 microseconds.&quot;</span><span class="p">)</span>


		<span class="n">modulationType</span>     <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">modulationType</span><span class="p">)</span>
		<span class="n">freq</span>               <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>
		<span class="n">ifBw</span>               <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="n">ifBw</span><span class="p">)</span>
		<span class="n">audioLowPassFreq</span>   <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="n">audioLowPassFreq</span><span class="p">)</span>
		<span class="n">audioHighPassFreq</span>  <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="n">audioHighPassFreq</span><span class="p">)</span>
		<span class="n">fmDeemphasis</span>       <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">(</span><span class="n">fmDeemphasis</span><span class="p">)</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbConfigureDemod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">modulationType</span><span class="p">,</span> <span class="n">freq</span><span class="p">,</span> <span class="n">ifBw</span><span class="p">,</span> <span class="n">audioLowPassFreq</span><span class="p">,</span> <span class="n">audioHighPassFreq</span><span class="p">,</span> <span class="n">fmDeemphasis</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to configureDemod succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting configureDemod! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.initiate"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.initiate">[docs]</a>	<span class="k">def</span> <span class="nf">initiate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">flag</span><span class="p">,</span> <span class="n">gps_timestamp</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbInitiate(int device, unsigned int mode, unsigned int flag);</span>

<span class="sd">		device  Handle to the device being configured.</span>
<span class="sd">		mode  The possible values for mode are BB_SWEEPING, BB_REAL_TIME,</span>
<span class="sd">			BB_ZERO_SPAN, BB_TIME_GATE, BB_RAW_SWEEP,</span>
<span class="sd">			BB_RAW_SWEEP_LOOP and BB_AUDIO_DEMOD.</span>
<span class="sd">		flag  The default value is zero.</span>
<span class="sd">			If mode equals BB_ZERO_SPAN, flag can be used to denote the type of</span>
<span class="sd">			modulation performed on the incoming signal. BB_DEMOD_AM and</span>
<span class="sd">			BB_DEMOD_FM are the two options.</span>
<span class="sd">			Flag can be used to inform the API to time</span>
<span class="sd">			stamp data using an external GPS reciever. Mask the bandwidth flag (‘|’</span>
<span class="sd">			in C) with BB_TIME_STAMP to achieve this. See Appendix:Using a GPS</span>
<span class="sd">			Receiver to Time-Stamp Data for information on how to set this up.</span>

<span class="sd">		bbInitiate configures the device into a state determined by the mode parameter. For more information</span>
<span class="sd">		regarding operating states, refer to the Theory of Operation and Modes of Operation sections. This</span>
<span class="sd">		function calls bbAbort before attempting to reconfigure. It should be noted, if an error is returned, any</span>
<span class="sd">		past operating state will no longer be active.</span>
<span class="sd">		Pay special attention to the bbInvalidParameterErr description below</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;acq_mode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mode</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;acq_flag&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">flag</span>

		<span class="n">modeOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;sweeping&quot;</span>       <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_SWEEPING</span><span class="p">,</span>
			<span class="s">&quot;streaming&quot;</span>      <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_STREAMING</span><span class="p">,</span>
			<span class="s">&quot;real-time&quot;</span>      <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_REAL_TIME</span><span class="p">,</span>
			<span class="s">&quot;zero-span&quot;</span>      <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_ZERO_SPAN</span><span class="p">,</span>
			<span class="s">&quot;time-gate&quot;</span>      <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_TIME_GATE</span><span class="p">,</span>
			<span class="s">&quot;raw-sweep&quot;</span>      <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_RAW_SWEEP</span><span class="p">,</span>
			<span class="s">&quot;raw-sweep-loop&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_RAW_SWEEP_LOOP</span><span class="p">,</span>
			<span class="s">&quot;audio-demod&quot;</span>    <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_AUDIO_DEMOD</span>
		<span class="p">}</span>

		<span class="n">zeroSpanOpts</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;demod-am&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_AM</span><span class="p">,</span>
			<span class="s">&quot;demod-fm&quot;</span> <span class="p">:</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEMOD_FM</span>
		<span class="p">}</span>


		<span class="k">if</span> <span class="n">mode</span> <span class="ow">in</span> <span class="n">modeOpts</span><span class="p">:</span>
			<span class="n">mode</span> <span class="o">=</span> <span class="n">modeOpts</span><span class="p">[</span><span class="n">mode</span><span class="p">]</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Mode must be one of </span><span class="si">%s</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">modeOpts</span><span class="p">,</span> <span class="n">mode</span><span class="p">))</span>


		<span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_ZERO_SPAN</span> <span class="ow">or</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_TIME_GATE</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s">&quot;Zero span and time-gate modes are not functional yet in the BB 2.0 API Version. Please contact signalhound for more information.&quot;</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_ZERO_SPAN</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">flag</span> <span class="ow">in</span> <span class="n">zeroSpanOpts</span><span class="p">:</span>
				<span class="n">flag</span> <span class="o">=</span> <span class="n">zeroSpanOpts</span><span class="p">[</span><span class="n">flag</span><span class="p">]</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Available flag settings for mode </span><span class="se">\&quot;</span><span class="s">zero-span</span><span class="se">\&quot;</span><span class="s"> are </span><span class="se">\&quot;</span><span class="s">demod-am</span><span class="se">\&quot;</span><span class="s"> and </span><span class="se">\&quot;</span><span class="s">demod-fm</span><span class="se">\&quot;</span><span class="s">. Passed value was </span><span class="si">%s</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">flag</span><span class="p">)</span>

		<span class="c"># Checking for raw-pipe mode is messy, since it uses the same configuration value as the streaming mode.</span>
		<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;acq_mode&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;raw-pipe&quot;</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Raw pipe mode is depreciated, and has been removed.&quot;</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="n">flag</span> <span class="o">=</span> <span class="mi">0</span>


		<span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_REAL_TIME</span><span class="p">:</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="s">&quot;span_freq&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;You must call configureCenterSpan() before initiate()!&quot;</span><span class="p">)</span>
			<span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB60C_MAX_RT_SPAN</span> <span class="ow">or</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_MIN_RT_SPAN</span> <span class="p">):</span>

				<span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">devType</span><span class="p">:</span>
					<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Device type not detected? How did this even occur!&quot;</span><span class="p">)</span>
				<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">devType</span> <span class="o">==</span> <span class="s">&quot;BB60C&quot;</span><span class="p">:</span>
					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB60C_MAX_RT_SPAN</span><span class="p">:</span>
						<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Real-time mode maximum span frequency is 27 Mhz for the BB60C. Specified span frequency = </span><span class="si">%f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">])</span>

				<span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">devType</span> <span class="o">==</span> <span class="s">&quot;BB60A&quot;</span><span class="p">:</span>
					<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB60A_MAX_RT_SPAN</span><span class="p">:</span>
						<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Real-time mode maximum span frequency is 20 Mhz for the BB60A. Specified span frequency = </span><span class="si">%f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;span_freq&quot;</span><span class="p">])</span>

			<span class="k">if</span> <span class="ow">not</span> <span class="s">&quot;rbw&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;You must call configureSweepCoupling() before initiate()!&quot;</span><span class="p">)</span>

			<span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rbw&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_MAX_RT_RBW</span> <span class="ow">or</span>
				<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rbw&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_MIN_RT_RBW</span><span class="p">):</span>
				<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Invalid RBW for Real-time mode. Minimum RBW is </span><span class="si">%f</span><span class="s">, maximum RBW is </span><span class="si">%f</span><span class="s">. Specified RBW = </span><span class="si">%f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">hf</span><span class="o">.</span><span class="n">BB_MIN_RT_RBW</span><span class="p">,</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_MAX_RT_RBW</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;rbw&quot;</span><span class="p">]))</span>


		<span class="k">if</span> <span class="n">gps_timestamp</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Timestamping returned data with GPS time&quot;</span><span class="p">)</span>
			<span class="n">flag</span> <span class="o">|=</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_TIME_STAMP</span>

		<span class="n">mode</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
		<span class="n">flag</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbInitiate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">mode</span><span class="p">,</span> <span class="n">flag</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to initiate succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbInvalidParameterErr&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;bbInvalidParameterErr!&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;&#39;&#39;In real-time mode, this value may be returned if the span limits defined in the API header are broken. Also in real-time mode, this error will be</span>
<span class="s">				returned if the resolution bandwidth is outside the limits defined in the API header.&#39;&#39;&#39;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;&#39;&#39;In time-gate analysis mode this error will be returned if span limits defined in the API header are broken. Also in time gate analysis, this</span>
<span class="s">				error is returned if the bandwidth provided require more samples for processing than is allowed in the gate length. To fix this, increase rbw/vbw.&#39;&#39;&#39;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The value for mode did not match any known value.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbAllocationLimitError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&#39;&#39;&#39;This value is returned in extreme circumstances. The API currently limits the amount of RAM usage to 1GB. When exceptional parameters are</span>
<span class="s">				provided, such as very low bandwidths, or long sweep times, this error may be returned. At this point you have reached the boundaries of the</span>
<span class="s">				device. The processing algorithms are optimized for speed at the expense of space, which is the reason this can occur.&#39;&#39;&#39;</span><span class="p">)</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Could not allocate sufficent RAM!&quot;</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbBandwidthErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;RBW is larger than your span. (Sweep Mode)!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting initiate! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.fetchTrace"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.fetchTrace">[docs]</a>	<span class="k">def</span> <span class="nf">fetchTrace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbFetchTrace(int device, int arraySize, double *min, double *max);</span>
<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		arraySize  A provided arraySize. This value must be equal to or greater than the</span>
<span class="sd">		traceSize value returned from bbQueryTraceInfo.</span>
<span class="sd">				min  Pointer to a double buffer, whose length is equal to or greater than</span>
<span class="sd">		traceSize returned from bbQueryTraceInfo.</span>
<span class="sd">				max  Pointer to a double buffer, whose length is equal to or greater than</span>
<span class="sd">		traceSize returned from bbQueryTraceInfo.</span>

<span class="sd">		Returns a minimum and maximum array of values relating to the current mode of operation. If the</span>
<span class="sd">		detectorType provided in bbConfigureAcquisition is BB_AVERAGE, the array will be populated with the</span>
<span class="sd">		same values. Element zero of each array corresponds to the startFreq returned from bbQueryTraceInfo.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">arraySize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">traceLen</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;You must call queryTraceInfo atleast once before fetchTrace&quot;</span><span class="p">)</span>
			<span class="k">raise</span>

		<span class="n">maxArr</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="n">arraySize</span><span class="p">)()</span>
		<span class="n">minArr</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_double</span> <span class="o">*</span> <span class="n">arraySize</span><span class="p">)()</span>

		<span class="n">maxPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">maxArr</span><span class="p">)</span>
		<span class="n">minPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">minArr</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbFetchTrace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">arraySize</span><span class="p">,</span> <span class="n">minPtr</span><span class="p">,</span> <span class="n">maxPtr</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="c"># self.log.info(&quot;Call to fetchTrace succeeded.&quot;)  # Commented out because it was NOISY</span>

			<span class="bp">self</span><span class="o">.</span><span class="n">sequentialADCErrors</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c"># There was no clipping, so reset the clipping integrator</span>
			<span class="k">pass</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbBufferTooSmallErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The &#39;arraySize&#39; parameter passed is less than the trace size returned from &#39;bbQueryTraceInfo&#39;.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbADCOverflow&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Clipping is common on the first acquitition cycle, presumably due to the IF stages settling.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;This error is only a problem if it occurs more then once and not at the immediate start of an acquisition, or immediately following a recalibration.&quot;</span><span class="p">)</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">sequentialADCErrors</span> <span class="o">+=</span> <span class="mi">1</span>

			<span class="c"># Only throw an actual error if we&#39;ve been clipping for a while.</span>
			<span class="c"># This way, transients won&#39;t break things (as fast, in any event).</span>
			<span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequentialADCErrors</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
				<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The ADC has detected clipping of the input signal for more then 10 sequential samples!&quot;</span><span class="p">)</span>

		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoTriggerFound&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&#39;&#39;&#39;In time-gated analysis, if the spectrum returned is not representative of</span>
<span class="s">				the gate specified, this warning is returned.</span>
<span class="s">				In zero-span analysis, if the device is configured to anticipate a video or</span>
<span class="s">				external trigger, this warning is returned when the trigger condition has</span>
<span class="s">				not been met for this trace.&#39;&#39;&#39;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbPacketFramingErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Data loss or miscommunication has occurred between the device and the API!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceConnectionErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device connection issues were present in the acquisition of this sweep!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting fetchTrace! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>


		<span class="n">maxData</span> <span class="o">=</span> <span class="n">SignalHound</span><span class="o">.</span><span class="n">fastDecodeArray</span><span class="p">(</span><span class="n">maxArr</span><span class="p">,</span> <span class="n">arraySize</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">double</span><span class="p">)</span>
		<span class="n">minData</span> <span class="o">=</span> <span class="n">SignalHound</span><span class="o">.</span><span class="n">fastDecodeArray</span><span class="p">(</span><span class="n">minArr</span><span class="p">,</span> <span class="n">arraySize</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">double</span><span class="p">)</span>

		<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;max&quot;</span> <span class="p">:</span> <span class="n">maxData</span><span class="p">,</span>
			<span class="s">&quot;min&quot;</span> <span class="p">:</span> <span class="n">minData</span>
		<span class="p">}</span>



		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="SignalHound.fetchAudio"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.fetchAudio">[docs]</a>	<span class="k">def</span> <span class="nf">fetchAudio</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbFetchAudio(int device, float *audio);</span>

<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		audio  Pointer to an array of 4096 32-bit floating point values</span>

<span class="sd">		If the device is initiated and running in the audio demodulation mode, the function is a blocking call</span>
<span class="sd">		which returns the next 4096 audio samples. The approximate blocking time for this function is 128 ms if</span>
<span class="sd">		called again immediately after returning. There is no internal buffering of audio, meaning the audio will</span>
<span class="sd">		be overwritten if this function is not called in a timely fashion. The audio values are typically -1.0 to 1.0,</span>
<span class="sd">		representing full-scale audio. In FM mode, the audio values will scale with a change in IF bandwidth.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="n">arraySize</span> <span class="o">=</span> <span class="mi">4096</span>
		<span class="n">audioArr</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_float</span> <span class="o">*</span> <span class="n">arraySize</span><span class="p">)()</span>
		<span class="n">audioArrPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">audioArr</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbFetchAudio</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">audioArrPtr</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to fetchAudio succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceConnectionErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device connection issues were present in the acquisition of this sweep!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting fetchAudio! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">audioArr</span><span class="p">)</span>  <span class="c"># Map numpy array onto the same memory location as audioArr</span>

		<span class="c">#Note: Copy is *probably* not needed, as the memory location is owned by the python code, rather then the SignalHound API.</span>
		<span class="k">return</span> <span class="n">arr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c"># Copy, and return location.</span>
</div>
<div class="viewcode-block" id="SignalHound.fetchRawCorrections"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.fetchRawCorrections">[docs]</a>	<span class="k">def</span> <span class="nf">fetchRawCorrections</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbFetchRawCorrections(int device, float *corrections, int *index, double *startFreq);</span>

<span class="sd">		device        Handle of an initialized device.</span>
<span class="sd">		corrections   32-bit float array of length 2048. Correction values are decibel.</span>
<span class="sd">		index         Index into the corrections array where the correction data begins.</span>
<span class="sd">		startFreq      Frequency associated with the correction at index.</span>

<span class="sd">		When this function returns successfully, the correction array will contain the frequency domain</span>
<span class="sd">		correction constants for the given bandwidth chosen. The corrections are modified based on</span>
<span class="sd">		temperature, gain, attenuation, and frequency. If any of these change, a new correction array should be</span>
<span class="sd">		requested. The correction array will only be generated again on a new bbInitiate().</span>
<span class="sd">		The correction arrays and returned values differ slightly depending on the 7 or 20 MHz bandwidth</span>
<span class="sd">		chosen. Each one is described in depth below.</span>

<span class="sd">		The correction array represents 40 MHz of bandwidth where frequencies outside the requested 20 MHz</span>
<span class="sd">		are zeroed out. The first non-zero sample begins at corrections[index]. The frequency at this index is</span>
<span class="sd">		startFreq. The bin size of each index is implied through 40 MHz divided by the length of the array,</span>
<span class="sd">		(40.0e6 / 2048) = 19531.25 Hz. If an Fourier transform is applied on the IF data, the correction values</span>
<span class="sd">		will line up with the usable 20 MHz bandwdith.</span>
<span class="sd">		7MHz</span>
<span class="sd">		The correction array represents 10 Mhz of bandwdith where the usable 7 MHz is centered and all values</span>
<span class="sd">		outside the usable 7 MHz is zeroed. The index returned is the first non zero sample in the array. The</span>
<span class="sd">		startFreq returned is the frequency of the first sample in the array, corrections[0]. Every other sample’s</span>
<span class="sd">		frequency can be determined with the bin size. The bin size for this array is (10.0e6 / 2048) = 4882.8125</span>
<span class="sd">		Hz. If a complex Fourier Transform is applied to the IQ data, the correction values will line up with the</span>
<span class="sd">		usable 7 MHz bandwidth.</span>
<span class="sd">		Tips</span>
<span class="sd">		Time domain corrections of the signal’s amplitude require two steps. First, an inverse Fourier Transform</span>
<span class="sd">		must be performed on the entire correction array (including zero’ed portions). This results in a 4096</span>
<span class="sd">		sample kernel. Second, the kernel is used in convolution with the time domain data. If a larger/smaller</span>
<span class="sd">		kernel is desired, interpolate/extrapolate the correction array while it is in the frequency domain to the</span>
<span class="sd">		desired length. Lengths which are powers of two are suggested.</span>
<span class="sd">		Frequency domain correction of the signal’s amplitude requires you to first transform the raw data into</span>
<span class="sd">		the frequency domain. Performing an Fourier transform on the incoming data will yeild a frequency</span>
<span class="sd">		domain array that will align with the correction array. You can index the Transform results using the</span>
<span class="sd">		index returned from this function if you wish or apply the whole array. Remember that the corrections</span>
<span class="sd">		are in dB. If larger Transform sizes are desired, you can interpolate the correction array to the desired</span>
<span class="sd">		size. (Be aware! This will change the index of the first non-zero correction, but the results of the FFT will</span>
<span class="sd">		still align the with usable 20 MHz)</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="n">arraySize</span> <span class="o">=</span> <span class="mi">2048</span>
		<span class="n">corrArr</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_float</span> <span class="o">*</span> <span class="n">arraySize</span><span class="p">)()</span>
		<span class="n">corrArrPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">corrArr</span><span class="p">)</span>

		<span class="n">index</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">startFreq</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">indexPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
		<span class="n">startFreqPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">startFreq</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbFetchRawCorrections</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">corrArrPtr</span><span class="p">,</span> <span class="n">indexPtr</span><span class="p">,</span> <span class="n">startFreqPtr</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to fetchRawCorrections succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting fetchRawCorrections! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
			<span class="s">&quot;data&quot;</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ctypeslib</span><span class="o">.</span><span class="n">as_array</span><span class="p">(</span><span class="n">corrArr</span><span class="p">),</span>
			<span class="s">&quot;index&quot;</span> <span class="p">:</span> <span class="n">index</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
			<span class="s">&quot;startFreq&quot;</span> <span class="p">:</span> <span class="n">startFreq</span><span class="o">.</span><span class="n">value</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="n">ret</span>

</div>
	<span class="nd">@classmethod</span>
<div class="viewcode-block" id="SignalHound.getRawSweep_size"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getRawSweep_size">[docs]</a>	<span class="k">def</span> <span class="nf">getRawSweep_size</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_float</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">rawDataArrSize</span>
</div>
	<span class="nd">@classmethod</span>
<div class="viewcode-block" id="SignalHound.getRawSweep_s_size"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getRawSweep_s_size">[docs]</a>	<span class="k">def</span> <span class="nf">getRawSweep_s_size</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_short</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">rawDataArrSize</span>
</div>
	<span class="nd">@classmethod</span>
<div class="viewcode-block" id="SignalHound.getRawSweepTrig_size"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getRawSweepTrig_size">[docs]</a>	<span class="k">def</span> <span class="nf">getRawSweepTrig_size</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
		<span class="k">return</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">,</span> <span class="n">cls</span><span class="o">.</span><span class="n">rawSweepTriggerArraySize</span>



</div>
<div class="viewcode-block" id="SignalHound.fetchRawSweep"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.fetchRawSweep">[docs]</a>	<span class="k">def</span> <span class="nf">fetchRawSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbFetchRawSweep(int device, short *buffer);</span>

<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		buffer  Pointer to an array of signed short integers</span>

<span class="sd">		This function is used to collect a single sweep for a device configured in raw sweep mode. The length of</span>
<span class="sd">		the buffer provided is determined by the settings used to configure the device for raw sweep mode. This</span>
<span class="sd">		length can be determined using the equation.</span>
<span class="sd">				Buffer-Length = 18688 * ppf * steps</span>
<span class="sd">		If the function returns successfully the array will contain a full sweep. The shorts will</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">bufLen</span> <span class="o">=</span> <span class="mi">18688</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;ppf&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">[</span><span class="s">&quot;steps&quot;</span><span class="p">]</span>
		<span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;You must call configureRawSweep before fetchRawSweep&quot;</span><span class="p">)</span>


		<span class="n">rawBuf</span> <span class="o">=</span> <span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_short</span> <span class="o">*</span> <span class="n">bufLen</span><span class="p">)()</span>
		<span class="n">rawBufPtr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">rawBuf</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbFetchRawSweep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">rawBufPtr</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="k">pass</span>  <span class="c"># No print statements here. Too noisy</span>

		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbADCOverflow&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;The ADC has detected clipping of the input signal!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbPacketFramingErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Data loss or miscommunication has occurred between the device and the API!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceConnectionErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device connection issues were present in the acquisition of this sweep!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting fetchRawSweep! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>


		<span class="n">data</span> <span class="o">=</span> <span class="n">SignalHound</span><span class="o">.</span><span class="n">fastDecodeArray</span><span class="p">(</span><span class="n">rawBuf</span><span class="p">,</span> <span class="n">bufLen</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">short</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">data</span>
</div>
<div class="viewcode-block" id="SignalHound.startRawSweepLoop"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.startRawSweepLoop">[docs]</a>	<span class="k">def</span> <span class="nf">startRawSweepLoop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callbackFunc</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbStartRawSweepLoop(int device, void(*sweep_callback)(short *buffer, int len));</span>

<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		sweep_callback  Pointer to a C function. Used as a callback to notify the user of</span>
<span class="sd">				completed sweeps.</span>

<span class="sd">		This function can be called after being configured and initiated in RAW_SWEEP_LOOP mode. The device</span>
<span class="sd">		begins sweeping on the first call to this function after the device has been initiated. It is possible to call</span>
<span class="sd">		this function multiple times per initiate to change the function call back used.</span>
<span class="sd">		If this function returns successfully, the device begins sweeping immediately. The function provided is</span>
<span class="sd">		set as the callback function used when a sweep is completed. sweep_callback is called once per sweep</span>
<span class="sd">		completion. The function passes two parameters, a pointer to the buffer of data for the sweep, and the</span>
<span class="sd">		length of the buffer.</span>
<span class="sd">		The data buffer will not be overwritten when in the function body of sweep_callback. The API will</span>
<span class="sd">		maintain a circular list of buffers to store sweeps in. The API will store up to ¼ to ½ seconds worth of</span>
<span class="sd">		sweeps depending on parameters. If the function body of sweep_callback exceeds this amount of time,</span>
<span class="sd">		it is possible for the API to need to move ahead and skip over the buffer the user is still accessing. This</span>
<span class="sd">		will cause a loss of data. It is recommended the function body of sweep_callback is short, preferably</span>
<span class="sd">		simply copying the data from buffer into your own data structure. This ensures you receive every sweep</span>
<span class="sd">		and make your own decisions on when to drop/ignore sweeps.</span>
<span class="sd">		The sweep_callback function is not called in the main thread of execution. It is called once per sweep,</span>
<span class="sd">		which can result in the function being called anywhere from 3-250 milliseconds. It is the responsibility of</span>
<span class="sd">		the user to not index the buffer out of range. The buffer contents can be modified by the user only</span>
<span class="sd">		during the function body of sweep_callback, once the function returns, the API is free to overwrite the</span>
<span class="sd">		contents. Modifying the contents of the buffer not in the function body of sweep_callback is undefined.</span>
<span class="sd">		The user should not attempt to manage any of the memory provided through the buffer pointers.</span>
<span class="sd">		The device sweeps indefinitely until bbAbort or bbCloseDevice is called. When operation is suspended</span>
<span class="sd">		via bbAbort, the device must be reconfigured and initiated again before calling this function.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">callbackFunc</span><span class="p">):</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;You must pass a callable variable for the callback!&quot;</span><span class="p">)</span>

		<span class="n">callBackFactory</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">WINFUNCTYPE</span><span class="p">(</span><span class="bp">None</span><span class="p">,</span> <span class="n">ct</span><span class="o">.</span><span class="n">POINTER</span><span class="p">(</span><span class="n">ct</span><span class="o">.</span><span class="n">c_short</span><span class="p">),</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">cRawSweepCallbackFunc</span> <span class="o">=</span> <span class="n">callBackFactory</span><span class="p">(</span><span class="n">callbackFunc</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbStartRawSweepLoop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">cRawSweepCallbackFunc</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Started raw sweep loop.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error in startRawSweepLoop!&quot;</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.queryTraceInfo"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.queryTraceInfo">[docs]</a>	<span class="k">def</span> <span class="nf">queryTraceInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbQueryTraceInfo(int device, unsigned int *traceLen, double *binSize, double *start);</span>

<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		traceLen  A pointer to an unsigned int. If the function returns successfully</span>
<span class="sd">				traceLen will contain the size of arrays returned by bbFetchTrace.</span>
<span class="sd">		binSize  A pointer to a 64bit floating point variable. If the function returns</span>
<span class="sd">				successfully, binSize will contain the frequency difference between two</span>
<span class="sd">				sequential bins in a returned sweep. In Zero-Span mode, binSize refers</span>
<span class="sd">				to the difference between sequential samples in seconds.</span>
<span class="sd">		start  A pointer to a 64bit floating point variable. If the function returns</span>
<span class="sd">				successfully, start will contain the frequency of the first bin in a</span>
<span class="sd">				returned sweep. In Zero-Span mode, start represents the exact center</span>
<span class="sd">				frequency used by the API.</span>

<span class="sd">		This function should be called to determine sweep characteristics after a device has been configured</span>
<span class="sd">		and initiated. For zero-span mode, startFreq and binSize will refer to the time domain values. In zero-</span>
<span class="sd">		span mode startFreq will always be zero, and binSize will be equal to sweepTime/traceSize.</span>

<span class="sd">		Note: Calling while in BB_RAW_PIPE mode will produce a bbDeviceNotConfiguredErr</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="c"># self.log.info(&quot;Querying device for trace information.&quot;)</span>

		<span class="n">traceLen</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">traceLenPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">traceLen</span><span class="p">)</span>

		<span class="n">binSize</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">binSizePnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">binSize</span><span class="p">)</span>

		<span class="n">start</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">startPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">start</span><span class="p">)</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbQueryTraceInfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">traceLenPnt</span><span class="p">,</span> <span class="n">binSizePnt</span><span class="p">,</span> <span class="n">startPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="c"># self.log.info(&quot;returned queryTraceInfo: %d, %f, %f&quot; % (traceLen.value, binSize.value, start.value))</span>
			<span class="k">pass</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured, or in </span><span class="se">\&quot;</span><span class="s">raw-pipe</span><span class="se">\&quot;</span><span class="s"> mode!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error in queryTraceInfo!&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">traceLen</span> <span class="o">=</span> <span class="n">traceLen</span><span class="o">.</span><span class="n">value</span>

		<span class="k">return</span> <span class="p">{</span><span class="s">&quot;arr-size&quot;</span> <span class="p">:</span> <span class="n">traceLen</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&quot;arr-bin-size&quot;</span> <span class="p">:</span> <span class="n">binSize</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&quot;ret-start-freq&quot;</span> <span class="p">:</span> <span class="n">start</span><span class="o">.</span><span class="n">value</span><span class="p">}</span>
</div>
<div class="viewcode-block" id="SignalHound.queryStreamingCenter"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.queryStreamingCenter">[docs]</a>	<span class="k">def</span> <span class="nf">queryStreamingCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbQueryStreamingCenter(int device, double *center);</span>
<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		center  Pointer to a double which will receive the absolute center frequency of</span>
<span class="sd">				the streaming device.</span>

<span class="sd">		The function retrieves the center frequency of the 20 MHz IF bandwidth of a device currently initialized</span>
<span class="sd">		in raw pipe mode. The center returned is representative of ¼ of the IF sample rate. The 20 MHz of usable</span>
<span class="sd">		bandwidth is centered on this frequency.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying device for streaming center-freqency.&quot;</span><span class="p">)</span>

		<span class="n">center</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">centerPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbQueryStreamingCenter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">centerPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;returned streaming center-frequency: </span><span class="si">%f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">center</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error in queryStreamingCenter!&quot;</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">center</span><span class="o">.</span><span class="n">value</span>


</div>
<div class="viewcode-block" id="SignalHound.queryTimestamp"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.queryTimestamp">[docs]</a>	<span class="k">def</span> <span class="nf">queryTimestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbQueryTimestamp(int device, unsigned int *seconds, unsigned int *nanoseconds);</span>

<span class="sd">		device  Handle of an initialized device.</span>
<span class="sd">		seconds  Seconds since midnight (00:00:00), January 1, 1970, coordinated</span>
<span class="sd">				universal time(UTC).</span>
<span class="sd">		nanoseconds  nanoseconds between seconds and seconds + 1</span>

<span class="sd">		This function is used in conjunction with bbSyncCPUtoGPS and a GPS device to retrieve an absolute time</span>
<span class="sd">		for a data packet in raw pipe mode. This function returns an absolute time for the last packet retrieved</span>
<span class="sd">		from bbFetchRaw. See the Appendix:Code Examples for information on how to setup and interpret the</span>
<span class="sd">		time information.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying device for timestamp.&quot;</span><span class="p">)</span>
		<span class="n">seconds</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">nanoseconds</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

		<span class="n">secondsPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span>
		<span class="n">nanosecondsPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">nanoseconds</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbQueryTimestamp</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">secondsPnt</span><span class="p">,</span> <span class="n">nanosecondsPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;returned timestamp values: Seconds - </span><span class="si">%d</span><span class="s">, nanoseconds - </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">seconds</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">nanoseconds</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not Configured!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error in queryTimestamp!&quot;</span><span class="p">)</span>

		<span class="k">return</span> <span class="p">(</span><span class="n">seconds</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">nanoseconds</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.abort"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.abort">[docs]</a>	<span class="k">def</span> <span class="nf">abort</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbAbort(int device);</span>

<span class="sd">		Stops the device operation and places the device into an idle state.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="c"># cleanup state variables used in various modes.</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span> <span class="o">=</span> <span class="p">{}</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Stopping acquisition&quot;</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbAbort</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to abort succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotConfiguredErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device was already idle! Did you call abort without ever calling initiate()?&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting abort! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="SignalHound.preset"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.preset">[docs]</a>	<span class="k">def</span> <span class="nf">preset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbPreset(int device);</span>

<span class="sd">		This function exists to invoke a hard reset of the device. This will function similarly to a power</span>
<span class="sd">		cycle(unplug/re-plug the device). This might be useful if the device has entered an undesirable or</span>
<span class="sd">		unrecoverable state. Often the device might become unrecoverable if a program closed unexpectedly,</span>
<span class="sd">		not allowing the device to close properly. This function might allow the software to perform the reset</span>
<span class="sd">		rather than ask the user perform a power cycle.</span>

<span class="sd">		Viewing the traces returned is often the best way to determine if the device is operating normally. To</span>
<span class="sd">		utilize this function, the device must be open. Calling this function will trigger a reset which happens</span>
<span class="sd">		after 2 seconds. Within this time you must call bbCloseDevice to free any remaining resources and</span>
<span class="sd">		release the device serial number from the open device list. From the time of the bbPreset call, we</span>
<span class="sd">		suggest 3 to more seconds of wait time before attempting to re-open the device.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Performing hardware-reset of device!&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;Please ensure you close the device handle within two seconds of this call!&quot;</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbPreset</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to preset succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error calling preset! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.selfCal"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.selfCal">[docs]</a>	<span class="k">def</span> <span class="nf">selfCal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbSelfCal(int device);</span>

<span class="sd">		This function causes the device to recalibrate itself to adjust for internal device temperature changes,</span>
<span class="sd">		generating an amplitude correction array as a function of IF frequency. This function will explicitly call</span>
<span class="sd">		bbAbort() to suspend all device operations before performing the calibration, and will return the device</span>
<span class="sd">		in an idle state and configured as if it was just opened. The state of the device should not be assumed,</span>
<span class="sd">		and should be fully reconfigured after a self-calibration.</span>
<span class="sd">		Temperature changes of 2 degrees Celsius or more have been shown to measurably alter the</span>
<span class="sd">		shape/amplitude of the IF. We suggest using bbQueryDiagnostics to monitor the device’s temperature</span>
<span class="sd">		and perform self-calibrations when needed. Amplitude measurements are not guaranteed to be</span>
<span class="sd">		accurate otherwise, and large temperature changes (10 ° C or more) may result in adding a dB or more of</span>
<span class="sd">		error.</span>
<span class="sd">		Because this is a streaming device, we have decided to leave the programmer in full control of when the</span>
<span class="sd">		device in calibrated. The device is calibrated once upon opening the device through bbOpenDevice and is</span>
<span class="sd">		the responsibility of the programmer after that.</span>
<span class="sd">		Note:</span>
<span class="sd">		After calling this function, the device returns to the default state. Currently the API does not retain state</span>
<span class="sd">		prior to the calling of bbSelfCal(). Fully reconfiguring the device will be necessary.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Performing self-calibration of device.&quot;</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbSelfCal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to selfCal succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error calling selfCal! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.syncCPUtoGPS"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.syncCPUtoGPS">[docs]</a>	<span class="k">def</span> <span class="nf">syncCPUtoGPS</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comPort</span><span class="p">,</span> <span class="n">baudRate</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbSyncCPUtoGPS(int comPort, int baudRate);</span>

<span class="sd">		comPort  Com port number for the NMEA data output from the GPS reciever.</span>
<span class="sd">		baudRate  Baud Rate of the Com port</span>

<span class="sd">		The connection to the COM port is only established for the duration of this function. It is closed when</span>
<span class="sd">		the function returns. Call this function once before using a GPS PPS signal to time-stamp RF data. The</span>
<span class="sd">		synchronization will remain valid until the CPU clock drifts more than ¼ second, typically several hours,</span>
<span class="sd">		and will re-synchronize continually while streaming data using a PPS trigger input.</span>
<span class="sd">		This function calculates the offset between your CPU clock time and the GPS clock time to within a few</span>
<span class="sd">		milliseconds, and stores this value for time-stamping RF data using the GPS PPS trigger. This function</span>
<span class="sd">		ignores time zone, limiting the calculated offset to +/- 30 minutes. It was tested using an FTS 500 from</span>
<span class="sd">		Connor Winfield at 38.4 kbaud. It uses the “$GPRMC” string, so you must set up your GPS to output this</span>
<span class="sd">		string.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;GPS Synchronization not yet verified.&quot;</span><span class="p">)</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;e-mail Connor at connorw@imaginaryindustries.com if you have issues or comments&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Attempting to synchronize CPU with GPS timebase.&quot;</span><span class="p">)</span>

		<span class="n">comPort</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">comPort</span><span class="p">)</span>
		<span class="n">baudRate</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">baudRate</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbSyncCPUtoGPS</span><span class="p">(</span><span class="n">comPort</span><span class="p">,</span> <span class="n">baudRate</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to syncCPUtoGPS succeeded.&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbGPSErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Could not connect to GPS!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error synchronizing with GPS! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="SignalHound.getDeviceType"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getDeviceType">[docs]</a>	<span class="k">def</span> <span class="nf">getDeviceType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbGetDeviceType(int device, int *type);</span>

<span class="sd">		This function may be called only after the device has been opened. If the device successfully opened,</span>
<span class="sd">		type will contain the model type of the device pointed to by handle.</span>
<span class="sd">		Possible values for type are BB_DEVICE_NONE, BB_DEVICE_BB60A, BB_DEVICE_BB124. These values can</span>
<span class="sd">		be found in the bb_api header file</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying device for model information&quot;</span><span class="p">)</span>

		<span class="n">devType</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">devTypePnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">devType</span><span class="p">)</span>

		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetDeviceType</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">devTypePnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="k">pass</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting getDeviceType! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">devType</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEVICE_NONE</span><span class="p">:</span>
			<span class="n">dev</span> <span class="o">=</span> <span class="s">&quot;No device&quot;</span>
		<span class="k">elif</span> <span class="n">devType</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEVICE_BB60A</span><span class="p">:</span>
			<span class="n">dev</span> <span class="o">=</span> <span class="s">&quot;BB60A&quot;</span>
		<span class="k">elif</span> <span class="n">devType</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEVICE_BB60C</span><span class="p">:</span>
			<span class="n">dev</span> <span class="o">=</span> <span class="s">&quot;BB60C&quot;</span>
		<span class="k">elif</span> <span class="n">devType</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="n">hf</span><span class="o">.</span><span class="n">BB_DEVICE_BB124A</span><span class="p">:</span>
			<span class="n">dev</span> <span class="o">=</span> <span class="s">&quot;BB124&quot;</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Unknown device type!&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to getDeviceType succeeded. Type = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">dev</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">dev</span>

</div>
<div class="viewcode-block" id="SignalHound.getSerialNumber"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getSerialNumber">[docs]</a>	<span class="k">def</span> <span class="nf">getSerialNumber</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbGetSerialNumber(int device, unsigned int *sid);</span>

<span class="sd">		This function may be called only after the device has been opened. The serial number returned should</span>
<span class="sd">		match the number on the case.</span>
<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying device for serial number.&quot;</span><span class="p">)</span>

		<span class="n">serialNo</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">serialNoPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">serialNo</span><span class="p">)</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetSerialNumber</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">serialNoPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to getSerialNumber succeeded. Value = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">serialNo</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting getSerialNumber! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">serialNo</span><span class="o">.</span><span class="n">value</span>
</div>
<div class="viewcode-block" id="SignalHound.getFirmwareVersion"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getFirmwareVersion">[docs]</a>	<span class="k">def</span> <span class="nf">getFirmwareVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API bbStatus bbGetFirmwareVersion(int device, int *version);</span>

<span class="sd">		Use this function to determine which version of firmware is associated with the specified device.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying device for firmware version.&quot;</span><span class="p">)</span>

		<span class="n">firmwareRev</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_uint</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="n">firmwareRevPnt</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">pointer</span><span class="p">(</span><span class="n">firmwareRev</span><span class="p">)</span>


		<span class="n">err</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetFirmwareVersion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">firmwareRevPnt</span><span class="p">)</span>

		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNoError&quot;</span><span class="p">]:</span>
			<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Call to getFirmwareVersion succeeded. Value = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">firmwareRev</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbDeviceNotOpenErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Device not open!&quot;</span><span class="p">)</span>
		<span class="k">elif</span> <span class="n">err</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">bbStatus</span><span class="p">[</span><span class="s">&quot;bbNullPtrErr&quot;</span><span class="p">]:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Null pointer error!&quot;</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s">&quot;Unknown error setting getFirmwareVersion! Error = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">err</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">firmwareRev</span><span class="o">.</span><span class="n">value</span>

</div>
<div class="viewcode-block" id="SignalHound.getAPIVersion"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getAPIVersion">[docs]</a>	<span class="k">def</span> <span class="nf">getAPIVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API const char* bbGetAPIVersion();</span>

<span class="sd">		The returned string is of the form</span>
<span class="sd">		major.minor.revision</span>
<span class="sd">		Ascii periods (“.”) separate positive integers. Major/Minor/Revision are</span>
<span class="sd">		not gauranteed to be a single decimal digit. The string is null</span>
<span class="sd">		terminated. An example string is below ..</span>
<span class="sd">		[ ‘1’ | ‘.’ | ‘2’ | ‘.’ | ‘1’ | ‘1’ | ‘\0’ ] = “1.2.11”</span>
<span class="sd">		&#39;&#39;&#39;</span>


		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Querying API for revision information.&quot;</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetAPIVersion</span><span class="o">.</span><span class="n">restype</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char_p</span>  <span class="c"># Tell ctypes this function returns a pointer to a string</span>
		<span class="n">apiRevStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetAPIVersion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">)</span>
		<span class="n">ret</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">(</span><span class="n">apiRevStr</span><span class="p">)</span><span class="o">.</span><span class="n">value</span> 		<span class="c"># Dereference pointer, extract string</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Device firmware rev = </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">ret</span><span class="p">)</span>
		<span class="k">return</span> <span class="n">ret</span>
</div>
<div class="viewcode-block" id="SignalHound.getErrorString"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getErrorString">[docs]</a>	<span class="k">def</span> <span class="nf">getErrorString</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errCode</span><span class="p">):</span>
		<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">		BB_API const char* bbGetErrorString(bbStatus status);</span>

<span class="sd">		Produce an ascii string representation of a given status code. Useful for debugging.</span>
<span class="sd">		Probably not really needed, since I&#39;m doing error decoding locally in each function.</span>

<span class="sd">		This /should/ be of type bbStatus. bbStatus is an enum with hard-coded values, so I&#39;m being lazy, and just using</span>
<span class="sd">		an int. It works well enough.</span>
<span class="sd">		&#39;&#39;&#39;</span>

		<span class="n">serialNo</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_int</span><span class="p">(</span><span class="n">errCode</span><span class="p">)</span>

		<span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetAPIVersion</span><span class="o">.</span><span class="n">restype</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char_p</span>  <span class="c"># Tell ctypes this function returns a pointer to a string</span>
		<span class="n">apiRevStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">bbGetAPIVersion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deviceHandle</span><span class="p">,</span> <span class="n">serialNo</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">ct</span><span class="o">.</span><span class="n">c_char_p</span><span class="p">(</span><span class="n">apiRevStr</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>  <span class="c"># Dereference pointer, extract string, return it.</span>
</div>
<div class="viewcode-block" id="SignalHound.getCurrentAcquisitionSettings"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.getCurrentAcquisitionSettings">[docs]</a>	<span class="k">def</span> <span class="nf">getCurrentAcquisitionSettings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">tmp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryTraceInfo</span><span class="p">()</span>
		<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
			<span class="n">tmp</span> <span class="o">=</span> <span class="p">{}</span>

		<span class="n">tmp</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getDeviceDiagnostics</span><span class="p">())</span>
		<span class="n">tmp</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">acq_conf</span><span class="p">)</span>

		<span class="k">return</span> <span class="n">tmp</span>
	<span class="c"># staticmethod, because it&#39;s only usefull for dealing with the SignalHound stuff, and yet it should be accessible easily for stuff like callbacks where you don&#39;t have.</span>
	<span class="c"># easy access to the instantiated class pointer</span></div>
	<span class="nd">@staticmethod</span>
<div class="viewcode-block" id="SignalHound.decodeRawSweep"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.decodeRawSweep">[docs]</a>	<span class="k">def</span> <span class="nf">decodeRawSweep</span><span class="p">(</span><span class="n">bufPtr</span><span class="p">,</span> <span class="n">bufLen</span><span class="p">):</span>
		<span class="n">bufAdr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="n">bufPtr</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
		<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">int_asbuffer</span><span class="p">(</span><span class="n">bufAdr</span><span class="p">,</span> <span class="n">bufLen</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">short</span><span class="p">()</span><span class="o">.</span><span class="n">nbytes</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">short</span><span class="p">)</span>  <span class="c"># Map array memory as a numpy array.</span>
		<span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c"># Then copy it, so our array won&#39;t get modified when the circular buffer overwrites itself.</span>
		<span class="c"># We have to copy() since the call normally just returns a array that is overlaid onto the pre-existing data</span>
		<span class="k">return</span> <span class="n">arr</span>
</div>
	<span class="nd">@staticmethod</span>
<div class="viewcode-block" id="SignalHound.fastDecodeArray"><a class="viewcode-back" href="../index.html#SignalHound.SignalHound.fastDecodeArray">[docs]</a>	<span class="k">def</span> <span class="nf">fastDecodeArray</span><span class="p">(</span><span class="n">ctBuff</span><span class="p">,</span> <span class="n">buffLen</span><span class="p">,</span> <span class="n">dtype</span><span class="p">):</span>
		<span class="n">bufAdr</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="n">ctBuff</span><span class="p">)</span>
		<span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">int_asbuffer</span><span class="p">(</span><span class="n">bufAdr</span><span class="p">,</span> <span class="n">buffLen</span> <span class="o">*</span> <span class="n">dtype</span><span class="p">()</span><span class="o">.</span><span class="n">nbytes</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">dtype</span><span class="p">)</span>  <span class="c"># Map array memory as a numpy array.</span>
		<span class="n">arr</span> <span class="o">=</span> <span class="n">arr</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>  <span class="c"># Then copy it, so our array won&#39;t get modified when the circular buffer overwrites itself.</span>
		<span class="c"># We have to copy() since the call normally just returns a array that is overlaid onto the pre-existing data</span>
		<span class="k">return</span> <span class="n">arr</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">PySignalHound 0.0.1 documentation</a> &raquo;</li>
          <li><a href="index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Connor Wolf.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>